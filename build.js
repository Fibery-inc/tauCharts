var tauCharts=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(6).utilsDom,r=n(22).GPL,a=n(12).Plot,o=n(21).Chart,u=n(18).UnitDomainMixin,s=n(9).UnitDomainPeriodGenerator,l=n(14).DSLReader,c=n(17).SpecEngineFactory,d=n(16).LayoutEngineFactory,f=n(5).FormatterRegistry,h=n(33).nodeMap,g=n(10).UnitsRegistry,p=n(25).Cartesian,m=n(29).Point,y=n(27).Line,v=n(28).Pie,x={},b={},w={UnitDomainMixin:u,UnitDomainPeriodGenerator:s,DSLReader:l,SpecEngineFactory:c,LayoutEngineFactory:d},k={UnitsRegistry:g,tickFormat:f,d3:d3,_:_,tickPeriod:s,colorBrewers:{add:function(t,e){t in x||(x[t]=e)},get:function(t){return x[t]}},plugins:{add:function(t,e){if(t in b)throw new Error("Plugin is already registered.");b[t]=e},get:function(t){return b[t]}},globalSettings:{log:function(t,e){e=e||"INFO",Array.isArray(t)||(t=[t]),console[e.toLowerCase()].apply(console,t)},excludeNull:!0,specEngine:[{name:"COMPACT",width:600},{name:"AUTO",width:Number.MAX_VALUE}],fitSize:!0,layoutEngine:"EXTRACT",getAxisTickLabelSize:_.memoize(i.getAxisTickLabelSize,function(t){return(t||"").length}),getScrollBarWidth:_.memoize(i.getScrollbarWidth),xAxisTickLabelLimit:100,yAxisTickLabelLimit:100,xTickWordWrapLinesLimit:2,yTickWordWrapLinesLimit:2,xTickWidth:9,yTickWidth:9,distToXAxisLabel:20,distToYAxisLabel:20,xAxisPadding:20,yAxisPadding:20,xFontLabelHeight:10,yFontLabelHeight:10,xDensityPadding:4,yDensityPadding:4,"xDensityPadding:measure":8,"yDensityPadding:measure":8,defaultFormats:{measure:"x-num-auto","measure:time":"x-time-auto"}}};a.globalSettings=k.globalSettings,k.UnitsRegistry.add("COORDS.PARALLEL",h["COORDS.PARALLEL"]).add("PARALLEL/ELEMENT.LINE",h["PARALLEL/ELEMENT.LINE"]).add("COORDS.RECT",h["COORDS.RECT"]).add("ELEMENT.POINT",h["ELEMENT.POINT"]).add("ELEMENT.LINE",h["ELEMENT.LINE"]).add("ELEMENT.INTERVAL",h["ELEMENT.INTERVAL"]).reg("RECT",p).reg("POINT",m).reg("LINE",y).reg("PIE",v),e.GPL=r,e.Plot=a,e.Chart=o,e.__api__=w,e.api=k,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";e.CSS_PREFIX="graphical-report__";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=function(t,e,i,r){var a=r(i(t),t);return(a[e]||[]).forEach(function(t){return n(t,e,i,r)}),a},i={clone:function(t){return JSON.parse(JSON.stringify(t))},isArray:function(t){return Array.isArray(t)},autoScale:function(t){var e=10,n=Math.min.apply(null,t),i=Math.max.apply(null,t);if(n===i){var r=i>=0?-1:1,a=i||1;i-=r*a/e}for(var o=[n,i],u=o[1]-o[0],s=Math.pow(10,Math.floor(Math.log(u/e)/Math.LN10)),l=e/u*s,c=[[.15,10],[.35,5],[.75,2],[1,1],[2,1]],d=-1;l>c[++d][0];);s*=c[d][1],o[0]=Math.floor(o[0]/s)*s,o[1]=Math.ceil(o[1]/s)*s;var f=n-o[0],h=o[1]-i,g=s/2;if(n>=0)o[0]=0;else{var p=g>=f?s:0;o[0]=o[0]-p}if(0>=i)o[1]=0;else{var m=g>=h?s:0;o[1]=o[1]+m}return[parseFloat(o[0].toFixed(15)),parseFloat(o[1].toFixed(15))]},traverseJSON:n};e.utils=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t["default"]:t},r=(n(2).utils,n(5).FormatterRegistry),a=i(n(7)),o=i(n(4)),u=function(t,e){return"translate("+t+","+e+")"},s=function(t){return"rotate("+t+")"},l=function(t){return a.contains(["bottom","top"],t.toLowerCase())?"h":"v"},c=a.memoize(function(t){return t.node().getComputedTextLength()},function(t){return t.node().textContent.length}),d=function(t,e,n){n=n||c,t.each(function(){var t=o.select(this),i=t.text().split(/\s+/),r=!1,a=i.reduce(function(i,a,o){if(r)return i;var u=o>0?[i,a].join(" "):a,s=n(t.text(u));if(e>s)i=u;else{var l=Math.floor(e/s*u.length);i=u.substr(0,l-4)+"...",r=!0}return i},"");t.text(a)})},f=function(t,e,n,i,r,a){a=a||c;var u=function(t,e,n,i,r,a,o){var u=o*n+a;return t.append("tspan").attr("x",i).attr("y",r).attr("dy",u+"em").text(e)};t.each(function(){var t=o.select(this),s=t.text().split(/\s+/),l=1.1,c=t.attr("x"),d=t.attr("y"),f=parseFloat(t.attr("dy"));t.text(null);var h=u(t,null,l,c,d,f,0),g=!1,p=s.length-1,m=s.reduce(function(t,i,r){if(g)return t;var o=t.length===n||r===p,u=t[t.length-1],s=""!==u?u+" "+i:i,l=a(h.text(s)),c=l>e;if(c&&o){var d=Math.floor(e/l*s.length);t[t.length-1]=s.substr(0,d-4)+"...",g=!0}return c&&!o&&t.push(i),c||(t[t.length-1]=s),t},[""]).filter(function(t){return t.length>0});d=r?-1*(m.length-1)*Math.floor(.5*i):d,m.forEach(function(e,n){return u(t,e,l,c,d,f,n)}),h.remove()})},h=function(t,e,n){var i=t.selectAll(".tick line"),r=n/i[0].length,a=r/2,o="h"===l(e.guide.scaleOrient);if("ordinal"===e.scaleType||"period"===e.scaleType){var u=o?"x":"y",s=o?a:-a;i.attr(u+"1",s).attr(u+"2",s)}},g=function(t,e){var n="h"===l(e.guide.scaleOrient);if(n&&"time"===e.scaleType){var i=t.selectAll(".tick")[0];if(i.length<2)return;var r=parseFloat(i[0].attributes.transform.value.replace("translate(","")),a=parseFloat(i[1].attributes.transform.value.replace("translate(","")),o=a-r,u=0,s=-1,c=t.selectAll(".tick text")[0];if(c.forEach(function(t,e){var n=t.textContent||"",i=n.length;i>u&&(u=i,s=e)}),s>=0){var d=c[s].getBoundingClientRect();o-d.width<8&&t.classed({"graphical-report__d3-time-overflown":!0})}}},p=function(t,e,n){var i=t.selectAll(".tick line"),r="h"===l(e.guide.scaleOrient);if(!r){var a=!1,o=-1;if("time"===e.scaleType)a=!0,o=0;else if("ordinal"===e.scaleType||"period"===e.scaleType){a=!0;var s=n/i[0].length,c=s/2;o=-c}if(a){var d=t.select(".tick").node().cloneNode(!0);t.append(function(){return d}).attr("transform",u(0,n-o))}}},m=function(t,e){var n=l(e.guide.scaleOrient),i="h"===n?1:-1,r=t.append("text").attr("transform",s(e.guide.label.rotate)).attr("class",e.guide.label.cssClass).attr("x",i*e.guide.size*.5).attr("y",i*e.guide.label.padding).style("text-anchor",e.guide.label.textAnchor),a=" > ",o=e.guide.label.text.split(a),u=o.length;if(o.forEach(function(t,e){r.append("tspan").attr("class","label-token label-token-"+e).text(t),u-1>e&&r.append("tspan").attr("class","label-token-delimiter label-token-delimiter-"+e).text(a)}),"right"===e.guide.label.dock){var c=t.selectAll("path.domain").node().getBBox();r.attr("x","h"===n?c.width:0)}else if("left"===e.guide.label.dock){var c=t.selectAll("path.domain").node().getBBox();r.attr("x","h"===n?0:-c.height)}},y=function(t,e){var n="h"===l(e.guide.scaleOrient),i=e.guide.rotate,r=t.selectAll(".tick text");if(r.attr("transform",s(i)).style("text-anchor",e.guide.textAnchor),90===i){var a=parseFloat(r.attr("dy"))/2;r.attr("x",9).attr("y",0).attr("dy",""+a+"em")}e.guide.tickFormatWordWrap?r.call(f,e.guide.tickFormatWordWrapLimit,e.guide.tickFormatWordWrapLines,e.guide.$maxTickTextH,!n):r.call(d,e.guide.tickFormatWordWrapLimit)},v=function(t,e,n){var i=this;if(t.scaleDim){var a=o.svg.axis().scale(t.scaleObj).orient(t.guide.scaleOrient),s=r.get(t.guide.tickFormat,t.guide.tickFormatNullAlias);null!==s&&(a.ticks(Math.round(n/t.guide.density)),a.tickFormat(s));var l=i.append("g").attr("class",t.guide.cssClass).attr("transform",u.apply(null,e)).call(a);h(l,t,n),y(l,t),m(l,t),g(l,t)}},x=function(t,e,n){var i=this,a=i.append("g").attr("class","grid").attr("transform",u(0,0)),s=(t.guide.showGridLines||"").toLowerCase();if(s.length>0){var l=a.append("g").attr("class","grid-lines");if(s.indexOf("x")>-1&&t.x.scaleDim){var c=t.x,d=o.svg.axis().scale(c.scaleObj).orient(c.guide.scaleOrient).tickSize(e),f=r.get(c.guide.tickFormat);null!==f&&(d.ticks(Math.round(n/c.guide.density)),d.tickFormat(f));var g=l.append("g").attr("class","grid-lines-x").call(d);h(g,c,n);var m=g.select("g.tick");if(m.node()&&"translate(0,0)"!==m.attr("transform")){var y=m.node().cloneNode(!0);l.node().appendChild(y),o.select(y).attr("class","border").attr("transform",u(0,0)).select("line").attr("x1",0).attr("x2",0)}}if(s.indexOf("y")>-1&&t.y.scaleDim){var v=t.y,x=o.svg.axis().scale(v.scaleObj).orient(v.guide.scaleOrient).tickSize(-n),f=r.get(v.guide.tickFormat);null!==f&&(x.ticks(Math.round(e/v.guide.density)),x.tickFormat(f));var b=l.append("g").attr("class","grid-lines-y").call(x);h(b,v,e),p(b,v,e)}l.selectAll("text").remove()}return a},b=function(t,e,n){return t[e]=a.defaults(t[e]||{},{label:""}),t[e].label=a.isObject(t[e].label)?t[e].label:{text:t[e].label},t[e].label=a.defaults(t[e].label,n||{},{padding:32,rotate:0,textAnchor:"middle",cssClass:"label",dock:null}),t[e]},w=function(t,e,n){return t[e]=a.defaults(t[e],n||{},{padding:0,density:30,rotate:0,tickPeriod:null,tickFormat:null,autoScale:!0}),t[e].tickFormat=t[e].tickFormat||t[e].tickPeriod,t[e]},_=function(t){return t.options=t.options||{},t.guide=t.guide||{},t.guide.padding=a.defaults(t.guide.padding||{},{l:0,b:0,r:0,t:0}),t.guide.x=b(t.guide,"x"),t.guide.x=w(t.guide,"x",{cssClass:"x axis",scaleOrient:"bottom",textAnchor:"middle"}),t.guide.y=b(t.guide,"y",{rotate:-90}),t.guide.y=w(t.guide,"y",{cssClass:"y axis",scaleOrient:"left",textAnchor:"end"}),t.guide.size=b(t.guide,"size"),t.guide.color=b(t.guide,"color"),t},k={translate:u,rotate:s,getOrientation:l,fnDrawDimAxis:v,fnDrawGrid:x,applyNodeDefaults:_,cutText:d,wrapText:f};e.utilsDraw=k,Object.defineProperty(e,"__esModule",{value:!0})},function(t){t.exports=d3},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t["default"]:t},r=i(n(4)),a={"x-num-auto":function(t){var e=parseFloat(t.toFixed(2));return Math.abs(e)<1?e.toString():r.format("s")(e)},percent:function(t){var e=parseFloat((100*t).toFixed(2));return e.toString()+"%"},day:r.time.format("%d-%b-%Y"),"day-short":r.time.format("%d-%b"),week:r.time.format("%d-%b-%Y"),"week-short":r.time.format("%d-%b"),month:function(t){var e=new Date(t),n=e.getMonth(),i=0===n?"%B, %Y":"%B";return r.time.format(i)(t)},"month-short":function(t){var e=new Date(t),n=e.getMonth(),i=0===n?"%b '%y":"%b";return r.time.format(i)(t)},"month-year":r.time.format("%B, %Y"),quarter:function(t){var e=new Date(t),n=e.getMonth(),i=(n-n%3)/3;return"Q"+(i+1)+" "+e.getFullYear()},year:r.time.format("%Y"),"x-time-auto":null},o={get:function(t,e){var n=e||"",i=function(t){return(null===t||"undefined"==typeof t?n:t).toString()},o=a.hasOwnProperty(t),u=o?a[t]:i;return o&&(u=a[t]),!o&&t&&(u=function(e){var n=_.isDate(e)?r.time.format(t):r.format(t);return n(e)}),o||t||(u=i),u},add:function(t,e){a[t]=e}};e.FormatterRegistry=o,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=document.createElement("div"),i={appendTo:function(t,e){var i;return t instanceof Node?i=t:(n.insertAdjacentHTML("afterbegin",t),i=n.childNodes[0]),e.appendChild(i),i},getScrollbarWidth:function(){var t=document.createElement("div");t.style.overflow="scroll",t.style.visibility="hidden",t.style.position="absolute",t.style.width="100px",t.style.height="100px",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},getStyle:function(t,e){return window.getComputedStyle(t,void 0).getPropertyValue(e)},getStyleAsNum:function(t,e){return parseInt(this.getStyle(t,e)||0,10)},getContainerSize:function(t){var e=this.getStyleAsNum(t,"padding-left"),n=this.getStyleAsNum(t,"padding-right"),i=this.getStyleAsNum(t,"padding-bottom"),r=this.getStyleAsNum(t,"padding-top"),a=this.getStyleAsNum(t,"border-top-width"),o=this.getStyleAsNum(t,"border-left-width"),u=this.getStyleAsNum(t,"border-right-width"),s=this.getStyleAsNum(t,"border-bottom-width"),l=a+o+u+s,c=t.getBoundingClientRect();return{width:c.width-e-n-2*l,height:c.height-i-r-2*l}},getAxisTickLabelSize:function(t){var e=['<svg class="graphical-report__svg">','<g class="graphical-report__cell cell">','<g class="x axis">','<g class="tick"><text><%= xTick %></text></g>',"</g>","</g>","</svg>"].join(""),n=_.template(e),i=document.createElement("div");i.style.position="absolute",i.style.visibility="hidden",i.style.width="100px",i.style.height="100px",i.style.border="1px solid green",document.body.appendChild(i),i.innerHTML=n({xTick:t});var r=d3.select(i).selectAll(".x.axis .tick text")[0][0],a={width:0,height:0},o=r.getBoundingClientRect();a.width=o.right-o.left,a.height=o.bottom-o.top;var u=0!==t.length?a.width/t.length:0;return a.width=a.width+1.5*u,document.body.removeChild(i),a}};e.utilsDom=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){var n,i;(function(){function r(t){function e(e,n,i,r,a,o){for(;a>=0&&o>a;a+=t){var u=r?r[a]:a;i=n(i,e[u],u,e)}return i}return function(n,i,r,a){i=_(i,a,4);var o=!A(n)&&w.keys(n),u=(o||n).length,s=t>0?0:u-1;return arguments.length<3&&(r=n[o?o[s]:s],s+=t),e(n,i,r,o,s,u)}}function a(t){return function(e,n,i){n=k(n,i);for(var r=null!=e&&e.length,a=t>0?0:r-1;a>=0&&r>a;a+=t)if(n(e[a],a,e))return a;return-1}}function o(t,e){var n=M.length,i=t.constructor,r=w.isFunction(i)&&i.prototype||c,a="constructor";for(w.has(t,a)&&!w.contains(e,a)&&e.push(a);n--;)a=M[n],a in t&&t[a]!==r[a]&&!w.contains(e,a)&&e.push(a)}var u=this,s=u._,l=Array.prototype,c=Object.prototype,d=Function.prototype,f=l.push,h=l.slice,g=c.toString,p=c.hasOwnProperty,m=Array.isArray,y=Object.keys,v=d.bind,x=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=w),e._=w,w.VERSION="1.8.2";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)}}return function(){return t.apply(e,arguments)}},k=function(t,e,n){return null==t?w.identity:w.isFunction(t)?_(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return k(t,e,1/0)};var L=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var a=arguments[r],o=t(a),u=o.length,s=0;u>s;s++){var l=o[s];e&&void 0!==n[l]||(n[l]=a[l])}return n}},T=function(t){if(!w.isObject(t))return{};if(x)return x(t);b.prototype=t;var e=new b;return b.prototype=null,e},O=Math.pow(2,53)-1,A=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&O>=e};w.each=w.forEach=function(t,e,n){e=_(e,n);var i,r;if(A(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var a=w.keys(t);for(i=0,r=a.length;r>i;i++)e(t[a[i]],a[i],t)}return t},w.map=w.collect=function(t,e,n){e=k(e,n);for(var i=!A(t)&&w.keys(t),r=(i||t).length,a=Array(r),o=0;r>o;o++){var u=i?i[o]:o;a[o]=e(t[u],u,t)}return a},w.reduce=w.foldl=w.inject=r(1),w.reduceRight=w.foldr=r(-1),w.find=w.detect=function(t,e,n){var i;return i=A(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},w.filter=w.select=function(t,e,n){var i=[];return e=k(e,n),w.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},w.reject=function(t,e,n){return w.filter(t,w.negate(k(e)),n)},w.every=w.all=function(t,e,n){e=k(e,n);for(var i=!A(t)&&w.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(!e(t[o],o,t))return!1}return!0},w.some=w.any=function(t,e,n){e=k(e,n);for(var i=!A(t)&&w.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(e(t[o],o,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n){return A(t)||(t=w.values(t)),w.indexOf(t,e,"number"==typeof n&&n)>=0},w.invoke=function(t,e){var n=h.call(arguments,2),i=w.isFunction(e);return w.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var i,r,a=-1/0,o=-1/0;if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var u=0,s=t.length;s>u;u++)i=t[u],i>a&&(a=i)}else e=k(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(r>o||r===-1/0&&a===-1/0)&&(a=t,o=r)});return a},w.min=function(t,e,n){var i,r,a=1/0,o=1/0;if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var u=0,s=t.length;s>u;u++)i=t[u],a>i&&(a=i)}else e=k(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(o>r||1/0===r&&1/0===a)&&(a=t,o=r)});return a},w.shuffle=function(t){for(var e,n=A(t)?t:w.values(t),i=n.length,r=Array(i),a=0;i>a;a++)e=w.random(0,a),e!==a&&(r[a]=r[e]),r[e]=n[a];return r},w.sample=function(t,e,n){return null==e||n?(A(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=k(e,n),w.pluck(w.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,i){var r={};return n=k(n,i),w.each(e,function(i,a){var o=n(i,a,e);t(r,i,o)}),r}};w.groupBy=S(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=S(function(t,e,n){t[n]=e}),w.countBy=S(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?h.call(t):A(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:A(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=k(e,n);var i=[],r=[];return w.each(t,function(t,n,a){(e(t,n,a)?i:r).push(t)}),[i,r]},w.first=w.head=w.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var D=function(t,e,n,i){for(var r=[],a=0,o=i||0,u=t&&t.length;u>o;o++){var s=t[o];if(A(s)&&(w.isArray(s)||w.isArguments(s))){e||(s=D(s,e,n));var l=0,c=s.length;for(r.length+=c;c>l;)r[a++]=s[l++]}else n||(r[a++]=s)}return r};w.flatten=function(t,e){return D(t,e,!1)},w.without=function(t){return w.difference(t,h.call(arguments,1))},w.uniq=w.unique=function(t,e,n,i){if(null==t)return[];w.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=k(n,i));for(var r=[],a=[],o=0,u=t.length;u>o;o++){var s=t[o],l=n?n(s,o,t):s;e?(o&&a===l||r.push(s),a=l):n?w.contains(a,l)||(a.push(l),r.push(s)):w.contains(r,s)||r.push(s)}return r},w.union=function(){return w.uniq(D(arguments,!0,!0))},w.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var a=t[i];if(!w.contains(e,a)){for(var o=1;n>o&&w.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},w.difference=function(t){var e=D(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,"length").length||0,n=Array(e),i=0;e>i;i++)n[i]=w.pluck(t,i);return n},w.object=function(t,e){for(var n={},i=0,r=t&&t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},w.indexOf=function(t,e,n){var i=0,r=t&&t.length;if("number"==typeof n)i=0>n?Math.max(0,r+n):n;else if(n&&r)return i=w.sortedIndex(t,e),t[i]===e?i:-1;if(e!==e)return w.findIndex(h.call(t,i),w.isNaN);for(;r>i;i++)if(t[i]===e)return i;return-1},w.lastIndexOf=function(t,e,n){var i=t?t.length:0;if("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1)),e!==e)return w.findLastIndex(h.call(t,0,i),w.isNaN);for(;--i>=0;)if(t[i]===e)return i;return-1},w.findIndex=a(1),w.findLastIndex=a(-1),w.sortedIndex=function(t,e,n,i){n=k(n,i,1);for(var r=n(e),a=0,o=t.length;o>a;){var u=Math.floor((a+o)/2);n(t[u])<r?a=u+1:o=u}return a},w.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),a=0;i>a;a++,t+=n)r[a]=t;return r};var P=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var a=T(t.prototype),o=t.apply(a,r);return w.isObject(o)?o:a};w.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,h.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),i=function(){return P(t,i,e,this,n.concat(h.call(arguments)))};return i},w.partial=function(t){var e=h.call(arguments,1),n=function(){for(var i=0,r=e.length,a=Array(r),o=0;r>o;o++)a[o]=e[o]===w?arguments[i++]:e[o];for(;i<arguments.length;)a.push(arguments[i++]);return P(t,n,this,this,a)};return n},w.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(i){var r=n.cache,a=""+(e?e.apply(this,arguments):i);return w.has(r,a)||(r[a]=t.apply(this,arguments)),r[a]};return n.cache={},n},w.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var i,r,a,o=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:w.now(),o=null,a=t.apply(i,r),o||(i=r=null)};return function(){var l=w.now();u||n.leading!==!1||(u=l);var c=e-(l-u);return i=this,r=arguments,0>=c||c>e?(o&&(clearTimeout(o),o=null),u=l,a=t.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(s,c)),a}},w.debounce=function(t,e,n){var i,r,a,o,u,s=function(){var l=w.now()-o;e>l&&l>=0?i=setTimeout(s,e-l):(i=null,n||(u=t.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,o=w.now();var l=n&&!i;return i||(i=setTimeout(s,e)),l&&(u=t.apply(a,r),a=r=null),u}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},w.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},w.once=w.partial(w.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return E&&o(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return E&&o(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},w.mapObject=function(t,e,n){e=k(e,n);for(var i,r=w.keys(t),a=r.length,o={},u=0;a>u;u++)i=r[u],o[i]=e(t[i],i,t);return o},w.pairs=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},w.invert=function(t){for(var e={},n=w.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=L(w.allKeys),w.extendOwn=w.assign=L(w.keys),w.findKey=function(t,e,n){e=k(e,n);for(var i,r=w.keys(t),a=0,o=r.length;o>a;a++)if(i=r[a],e(t[i],i,t))return i},w.pick=function(t,e,n){var i,r,a={},o=t;if(null==o)return a;w.isFunction(e)?(r=w.allKeys(o),i=_(e,n)):(r=D(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var u=0,s=r.length;s>u;u++){var l=r[u],c=o[l];i(c,l,o)&&(a[l]=c)}return a},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var i=w.map(D(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(i,e)}}return w.pick(t,e,n)},w.defaults=L(w.allKeys,!0),w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),a=0;i>a;a++){var o=n[a];if(e[o]!==r[o]||!(o in r))return!1}return!0};var C=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var r=g.call(t);if(r!==g.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===r;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,u=e.constructor;if(o!==u&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var s=n.length;s--;)if(n[s]===t)return i[s]===e;if(n.push(t),i.push(e),a){if(s=t.length,s!==e.length)return!1;for(;s--;)if(!C(t[s],e[s],n,i))return!1}else{var l,c=w.keys(t);if(s=c.length,w.keys(e).length!==s)return!1;for(;s--;)if(l=c[s],!w.has(e,l)||!C(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0};w.isEqual=function(t,e){return C(t,e)},w.isEmpty=function(t){return null==t?!0:A(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=m||function(t){return"[object Array]"===g.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===g.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&p.call(t,e)},w.noConflict=function(){return u._=s,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=function(t){return function(e){return null==e?void 0:e[t]}},w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var i=Array(Math.max(0,t));e=_(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=w.invert(F),N=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};w.escape=N(F),w.unescape=N(j),w.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),w.isFunction(i)?i.call(t):i};var W=0;w.uniqueId=function(t){var e=++W+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+z[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var i=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(i,function(e,n,i,o,u){return a+=t.slice(r,u).replace(I,B),r=u+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}var s=function(t){return o.call(this,t,w)},l=e.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},w.chain=function(t){var e=w(t);return e._chain=!0,e};var U=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),U(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),w.each(["concat","join","slice"],function(t){var e=l[t];w.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},n=[],i=function(){return w}.apply(e,n),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e){"use strict";var n=function(){var t=function(t,e){var n,i=_.toArray(arguments);n=_.isArray(i[0])?i[0]:_.times(t,function(){return _.times(e,function(){return null})}),this.cube=n};return t.prototype={iterate:function(t){var e=this.cube;return _.each(e,function(e,n){_.each(e,function(e,i){t(n,i,e)})}),this},getRC:function(t,e){return this.cube[t][e]},setRC:function(t,e,n){return this.cube[t][e]=n,this},sizeR:function(){return this.cube.length},sizeC:function(){var t=this.cube[0]||[];return t.length}},t}();e.TMatrix=n,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n={day:{cast:function(t){return new Date(t.setHours(0,0,0,0))},next:function(t){return new Date(t.setDate(t.getDate()+1))}},week:{cast:function(t){return t=new Date(t.setHours(0,0,0,0)),t=new Date(t.setDate(t.getDate()-t.getDay()))},next:function(t){return new Date(t.setDate(t.getDate()+7))}},month:{cast:function(t){return t=new Date(t.setHours(0,0,0,0)),t=new Date(t.setDate(1))},next:function(t){return new Date(t.setMonth(t.getMonth()+1))}},quarter:{cast:function(t){t=new Date(t.setHours(0,0,0,0)),t=new Date(t.setDate(1));var e=t.getMonth(),n=e-e%3;return new Date(t.setMonth(n))},next:function(t){return new Date(t.setMonth(t.getMonth()+3))}},year:{cast:function(t){return t=new Date(t.setHours(0,0,0,0)),t=new Date(t.setDate(1)),t=new Date(t.setMonth(0))},next:function(t){return new Date(t.setFullYear(t.getFullYear()+1))}}},i={add:function(t,e){return n[t.toLowerCase()]=e,this},get:function(t){return n[t.toLowerCase()]},generate:function(t,e,i){var r=[],a=n[i.toLowerCase()];if(a){var o=a.cast(new Date(e)),u=a.cast(new Date(t));for(r.push(u);(u=a.next(new Date(u)))<=o;)r.push(u)}return r}};e.UnitDomainPeriodGenerator=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n={},i={reg:function(t,e){return n[t]=e,this},add:function(t,e){var i={};return i.draw="function"==typeof e?e:e.draw,i.walk=e.walk||function(t){return t},n[t]=i,this},get:function(t){if(!n.hasOwnProperty(t))throw new Error("Unknown unit type: "+t);return n[t]}};e.UnitsRegistry=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function i(t){return u[t-1]||u[4]}function r(t){var e=0;return t>=160&&320>t?e=1:t>=320&&480>t?e=2:t>=480&&640>t?e=3:t>=640&&(e=4),s[e]}var a=n(1).CSS_PREFIX,o=[1,2,3,4,5],u=o.map(function(t){return a+"line-opacity-"+t}),s=o.map(function(t){return a+"line-width-"+t});e.getLineClassesByWidth=r,e.getLineClassesByCount=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function k(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:k(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=n(14).DSLReader,s=n(20).Tooltip,l=n(15).Emitter,c=n(17).SpecEngineFactory,d=n(16).LayoutEngineFactory,f=n(34),h=f.Plugins,g=f.propagateDatumEvents,p=n(2).utils,m=n(6).utilsDom,y=n(1).CSS_PREFIX,v=n(18).UnitDomainMixin,x=n(10).UnitsRegistry,b=n(13).DataProcessor,w=n(19).getLayout;
e.Plot=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._svg=null,this._filtersStore={filters:{},tick:0},this._layout=w(),this.setupConfig(t),this._plugins=new h(this.config.plugins,this)}return a(e,t),i(e,null,{setupConfig:{value:function(t){if(!t.spec&&!t.spec.unit)throw new Error("Provide spec for plot");this.config=_.defaults(t,{spec:{},data:[],plugins:[],settings:{}}),this._emptyContainer=t.emptyContainer||"",this.config.settings.specEngine=this.config.specEngine||this.config.settings.specEngine,this.config.settings.layoutEngine=this.config.layoutEngine||this.config.settings.layoutEngine,this.config.settings=this.setupSettings(this.config.settings),p.isArray(this.config.settings.specEngine)||(this.config.settings.specEngine=[{width:Number.MAX_VALUE,name:this.config.settings.specEngine}]),this.config.spec.dimensions=this.setupMetaInfo(this.config.spec.dimensions,this.config.data);var e=this.config.settings.log;this.config.settings.excludeNull&&this.addFilter({tag:"default",predicate:b.excludeNullValues(this.config.spec.dimensions,function(t){e([t,"point was excluded, because it has undefined values."],"WARN")})})},writable:!0,configurable:!0},getConfig:{value:function(){return this.config},writable:!0,configurable:!0},setupMetaInfo:{value:function(t,e){var n=t?t:b.autoDetectDimTypes(e);return b.autoAssignScales(n)},writable:!0,configurable:!0},setupSettings:{value:function(t){var n=e.globalSettings,i={};return Object.keys(n).forEach(function(t){i[t]=_.isFunction(n[t])?n[t]:p.clone(n[t])}),_.defaults(t||{},i)},writable:!0,configurable:!0},insertToRightSidebar:{value:function(t){return m.appendTo(t,this._layout.rightSidebar)},writable:!0,configurable:!0},insertToHeader:{value:function(t){return m.appendTo(t,this._layout.header)},writable:!0,configurable:!0},addBalloon:{value:function(t){return new s("",t||{})},writable:!0,configurable:!0},renderTo:{value:function(t,e){this._renderGraph=null,this._svg=null,this._defaultSize=_.clone(e);var n=d3.select(t),i=n.node();if(this._target=t,null===i)throw new Error("Target element not found");i.appendChild(this._layout.layout),n=d3.select(this._layout.content);var r=_.clone(e)||{};this._layout.content.innerHTML="",r.width&&r.height||(r=_.defaults(r,m.getContainerSize(this._layout.content.parentNode)));var a=this.getData();if(0===a.length)return void(this._layout.content.innerHTML=this._emptyContainer);this._layout.content.innerHTML="";var o=new v(this.config.spec.dimensions,a),s=_.find(this.config.settings.specEngine,function(t){return r.width<=t.width});this.config.settings.size=r;var l=c.get(s.name,this.config.settings),f=l(this.config.spec,o.mix({})),h=this.config.settings.size,p=new u(o,x),b=this,w=p.buildGraph(f),k=d.get(this.config.settings.layoutEngine)(w),L=p.calcLayout(k,h),T=p.renderGraph(L,n.append("svg").attr("class",y+"svg").attr("width",h.width).attr("height",h.height),function(t){return b.fire("unitready",t)});this._renderGraph=L,this._svg=T.node(),T.selectAll(".i-role-datum").call(g(this)),this._layout.rightSidebar.style.maxHeight=h.height+"px",this.fire("render",this._svg)},writable:!0,configurable:!0},getData:{value:function(t){t=t||{};var e=_.chain(this._filtersStore.filters).values().flatten().reject(function(e){return _.contains(t.excludeFilter,e.tag)}).pluck("predicate").value();return _.filter(this.config.data,_.reduce(e,function(t,e){return function(n){return t(n)&&e(n)}},function(){return!0}))},writable:!0,configurable:!0},setData:{value:function(t){this.config.data=t,this.refresh()},writable:!0,configurable:!0},getSVG:{value:function(){return this._svg},writable:!0,configurable:!0},addFilter:{value:function(t){var e=t.tag,n=this._filtersStore.filters[e]=this._filtersStore.filters[e]||[],i=this._filtersStore.tick++;return t.id=i,n.push(t),this.refresh(),i},writable:!0,configurable:!0},removeFilter:{value:function(t){var e=this;_.each(this._filtersStore.filters,function(n,i){e._filtersStore.filters[i]=_.reject(n,function(e){return e.id===t})}),this.refresh()},writable:!0,configurable:!0},refresh:{value:function(){this._target&&this.renderTo(this._target,this._defaultSize)},writable:!0,configurable:!0},resize:{value:function(){var t=void 0===arguments[0]?{}:arguments[0];this.renderTo(this._target,t)},writable:!0,configurable:!0},select:{value:function(t){var e=[];if(!this._renderGraph)return e;var n=function(t,e){e(t),(t.childUnits||[]).forEach(function(t){return n(t,e)})};return n(this._renderGraph,function(n){t(n)&&e.push(n)}),e},writable:!0,configurable:!0}}),e}(l)}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(2).utils,r=function(t){return t===Object(t)},a={isYFunctionOfX:function(t,e,n){var i=!0,a=null;try{t.reduce(function(t,i){var o=function(t,e){var n=i[e],a=r(n)?JSON.stringify(n):n;return t.push(a),t},u=e.reduce(o,[]).join("/"),s=n.reduce(o,[]).join("/");if(t.hasOwnProperty(u)){var l=t[u];if(l!==s)throw a={type:"RelationIsNotAFunction",keyX:e.join("/"),keyY:n.join("/"),valX:u,errY:[l,s]},new Error("RelationIsNotAFunction")}else t[u]=s;return t},{})}catch(o){if("RelationIsNotAFunction"!==o.message)throw o;i=!1}return{result:i,error:a}},excludeNullValues:function(t,e){var n=Object.keys(t).reduce(function(e,n){var i=t[n];return i.hasOwnProperty("hasNull")&&!i.hasNull||"measure"!==i.type&&"period"!==i.scale||e.push(n),e},[]);return function(t){var i=!n.some(function(e){return!(e in t)||null===t[e]});return i||e(t),i}},autoAssignScales:function(t){var e="category",n={category:"ordinal",order:"ordinal",measure:"linear"},i={};return Object.keys(t).forEach(function(r){var a=t[r],o=(a.type||e).toLowerCase();i[r]={},i[r].type=o,i[r].scale=a.scale||n[o],i[r].value=a.value}),i},autoDetectDimTypes:function(t){var e={type:"category",scale:"ordinal"},n=function(t,e){var n=e;return _.isDate(t)?(n.type="measure",n.scale="time"):_.isObject(t)?(n.type="order",n.scale="ordinal"):_.isNumber(t)&&(n.type="measure",n.scale="linear"),n},r=function(t,r){return Object.keys(r).forEach(function(a){var o=r.hasOwnProperty(a)?r[a]:null;if(t[a]=t[a]||{type:null,hasNull:!1},null===o)t[a].hasNull=!0;else{var u=n(o,i.clone(e)),s=u.type,l=u.scale,c=null!==t[a].type&&t[a].type!==s;t[a].type=c?e.type:s,t[a].scale=c?e.scale:l}}),t};return _.reduce(t,r,{})}};e.DataProcessor=a,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";{var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.DSLReader=function(){function t(e,n){i(this,t),this.domain=e,this.UnitsRegistry=n}return n(t,null,{buildGraph:{value:function(t){var e=this,n=function(t){return e.UnitsRegistry.get(t.type).walk(e.domain.mix(t),n)};return n(t.unit)},writable:!0,configurable:!0},calcLayout:{value:function(t,e){t.options={top:0,left:0,width:e.width,height:e.height};var n=function(t){if(!t.$matrix)return t;var e,i=t.options,r=t.guide.padding,a=i.width-(r.l+r.r),o=i.height-(r.t+r.b),u=t.$matrix.sizeR(),s=t.$matrix.sizeC(),l=a/s,c=o/u;return e=t.guide.split?{calcHeight:function(t,e,n,i){return t/i},calcTop:function(t,e,n,i){return(e+1)*(t/i)*n}}:{calcHeight:function(t){return t},calcTop:function(t,e){return e*c}},t.childUnits=t.childUnits||[],t.$matrix.iterate(function(i,r,a){var o=a.length;a.forEach(function(a,u){a.options={width:l,left:r*l,height:e.calcHeight(c,i,u,o),top:e.calcTop(c,i,u,o)},t.childUnits.push(a),n(a)})}),t};return n(t)},writable:!0,configurable:!0},renderGraph:{value:function(t,e,n){var i=this,r=n||function(t){return t};t.options.container=e;var a=function(t){var e=i.domain.mix(t),n=i.UnitsRegistry.get(t.type).draw(e),o=t.childUnits||[];o.forEach(function(e){e.options=_.extend({container:n},e.options),e.parentUnit=t,a(e)}),r(e)};return t.parentUnit=null,a(t),t.options.container},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";function n(t){var e=o[t];return e||(e=function(){for(var e,n,i=this,r=0;i=i.handler;){if(n=i.callbacks[t],"function"==typeof n){if(!e)for(e=[this],r=0;r<arguments.length;r++)e.push(arguments[r]);n.apply(i.context,e)}if(n=i.callbacks["*"],"function"==typeof n){if(!e)for(e=[this],r=0;r<arguments.length;r++)e.push(arguments[r]);n.call(i.context,{sender:this,type:t,args:e})}}},o[t]=e),e}var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a={},o={},u=function(){function t(){r(this,t),this.handler=null,this.emit_destroy=n("destroy")}return i(t,null,{addHandler:{value:function(t,e){e=e||this,this.handler={callbacks:t,context:e,handler:this.handler}},writable:!0,configurable:!0},on:{value:function(t,e,n){var i={};return i[t]=e,this.addHandler(i,n),i},writable:!0,configurable:!0},fire:{value:function(t,e){n.call(this,t).call(this,e)},writable:!0,configurable:!0},removeHandler:{value:function(t,e){var n,i=this;for(e=e||this;n=i,i=i.handler;)if(i.callbacks===t&&i.context===e)return i.callbacks=a,void(n.handler=i.handler)},writable:!0,configurable:!0},destroy:{value:function(){this.emit_destroy(),this.handler=null},writable:!0,configurable:!0}}),t}();e.Emitter=u,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(2).utils,r=n(3).utilsDraw,a=n(8).TMatrix,o=function(t,e){var n=e?e:{depth:-1,paddings:[]},i=t.guide.padding;return n.depth+=1,n.paddings.unshift({l:i.l,b:i.b,r:i.r,t:i.t}),t.unit&&t.unit.length&&o(t.unit[0],n),n},u={NONE:function(t){return t},EXTRACT:function(t){var e=function(t,n,i){var r=t,o=r.sizeR(),u=r.sizeC();r.iterate(function(t,r,s){s.forEach(function(e){return i(e,{firstRow:0===t,firstCol:0===r,lastRow:t===o-1,lastCol:r===u-1,depth:n})}),s.filter(function(t){return t.$matrix}).forEach(function(t){t.$matrix=new a(t.$matrix.cube),e(t.$matrix,n-1,i)})})},n=i.clone(t),u=new a([[[n]]]),s=o(n),l=s.paddings.reduce(function(t,e){return t.l+=e.l,t.b+=e.b,t.r+=e.r,t.t+=e.t,t},{l:0,b:0,r:0,t:0}),c=i.clone(l),d=s.paddings.reverse().map(function(t){return t.l=c.l-t.l,t.b=c.b-t.b,c={l:t.l,b:t.b},t});s.paddings=d.reverse();var f=10,h=r.applyNodeDefaults({type:"COORDS.RECT",options:i.clone(t.options),$matrix:new a([[[n]]]),guide:{padding:{l:l.l-f,b:l.b-f,r:l.r+f,t:l.t+f}}});return e(u,s.depth,function(t,e){var n=e.depth;t.guide.x.hide=t.guide.x.hide?t.guide.x.hide:!e.lastRow,t.guide.y.hide=t.guide.y.hide?t.guide.y.hide:!e.firstCol;var i=n>1?0:f,r=n>1?f:0;return t.guide.x.padding+=s.paddings[n].b,t.guide.y.padding+=s.paddings[n].l,t.guide.x.padding-=r,t.guide.y.padding-=r,t.guide.padding.l=i,t.guide.padding.b=i,t.guide.padding.r=i,t.guide.padding.t=i,t}),h}},s={get:function(t){return u[t]||u.NONE}};e.LayoutEngineFactory=s,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function i(t,e,n,i){var r=t.hasOwnProperty(n)?t[n]:{};_.each(i,function(t){_.extend(e.guide[n][t],r[t])}),_.extend(e.guide[n],_.omit.apply(_,[r].concat[i]))}var r=n(2).utils,a=n(3).utilsDraw,o=n(5).FormatterRegistry,u=(n(6).utilsDom,function(t,e){var n=e.guide||{},r={x:["label"],y:["label"],size:["label"],color:["label"],padding:[]};return _.each(r,function(e,r){i(n,t,r,e)}),_.extend(t.guide,_.omit.apply(_,[n].concat(_.keys(r)))),t}),s=function(t,e){return t.guide=t.guide||{},t.guide.padding=t.guide.padding||{l:0,t:0,r:0,b:0},t.hasOwnProperty("unit")||(t=_.defaults(t,e),t.guide=_.defaults(t.guide,r.clone(e.guide)),t.guide.x=_.defaults(t.guide.x,r.clone(e.guide.x)),t.guide.y=_.defaults(t.guide.y,r.clone(e.guide.y))),t},l=function(t){var e=t.unit||[],n=!t.hasOwnProperty("unit"),i=!e.some(function(t){return t.hasOwnProperty("unit")});return{type:t.type,isLeaf:n,isLeafParent:!n&&i}},c=function(t,e,n,i){if(0===t.length)return{width:0,height:0};if(null===e){var r=n("TauChart Library");return r.width=.625*i,r}var a=_.max(t,function(t){return e(t).toString().length}),o=_.isNumber(a)?".00":"";return n(e(a)+o)},d=function(t,e,n){var i=t.dimType,r=t.scaleType,a="*",o=[i,r,a].join(":"),u=[i,r].join(":");return n[o]||n[u]||n[i]||null},f=function(t,e,n,i,r,a){var u=e.dimension(t.x),s=e.dimension(t.y),l="measure"===u.dimType,f="measure"===s.dimType,h=n.hasOwnProperty("xDensityPadding:"+u.dimType)?n["xDensityPadding:"+u.dimType]:n.xDensityPadding,g=n.hasOwnProperty("yDensityPadding:"+s.dimType)?n["yDensityPadding:"+s.dimType]:n.yDensityPadding,p=e.scaleMeta(t.x,t.guide.x),m=p.values,y=e.scaleMeta(t.y,t.guide.y),v=y.values;t.guide.x.tickFormat=t.guide.x.tickFormat||d(u,p,n.defaultFormats),t.guide.y.tickFormat=t.guide.y.tickFormat||d(s,y,n.defaultFormats),["day","week","month"].indexOf(t.guide.x.tickFormat)>=0&&(t.guide.x.tickFormat+="-short"),["day","week","month"].indexOf(t.guide.y.tickFormat)>=0&&(t.guide.y.tickFormat+="-short");var x=0===m.length,b=0===v.length,w=c(m,o.get(t.guide.x.tickFormat,t.guide.x.tickFormatNullAlias),n.getAxisTickLabelSize,n.xAxisTickLabelLimit),_=c(v,o.get(t.guide.y.tickFormat,t.guide.y.tickFormatNullAlias),n.getAxisTickLabelSize,n.yAxisTickLabelLimit),k=n.xAxisPadding,L=n.yAxisPadding,T=i?!l:!1,O=r?!f:!1;t.guide.x.padding=x?0:k,t.guide.y.padding=b?0:L,t.guide.x.rotate=T?90:0,t.guide.x.textAnchor=T?"start":t.guide.x.textAnchor,t.guide.y.rotate=O?-90:0,t.guide.y.textAnchor=O?"middle":t.guide.y.textAnchor;var A=x?0:n.xTickWidth,S=b?0:n.yTickWidth;t.guide.x.tickFormatWordWrapLimit=n.xAxisTickLabelLimit,t.guide.y.tickFormatWordWrapLimit=n.yAxisTickLabelLimit;var D=T?{w:w.height,h:w.width}:{h:w.height,w:w.width};if(w.width>n.xAxisTickLabelLimit){t.guide.x.tickFormatWordWrap=!0,t.guide.x.tickFormatWordWrapLines=n.xTickWordWrapLinesLimit;var P=Math.ceil(w.width/n.xAxisTickLabelLimit),E=Math.min(P,n.xTickWordWrapLinesLimit),M=E*w.height;T?(D.h=n.xAxisTickLabelLimit,D.w=M):(D.h=M,D.w=n.xAxisTickLabelLimit)}var C=O?{w:_.height,h:_.width}:{h:_.height,w:_.width};if(_.width>n.yAxisTickLabelLimit){t.guide.y.tickFormatWordWrap=!0,t.guide.y.tickFormatWordWrapLines=n.yTickWordWrapLinesLimit;var P=Math.ceil(_.width/n.yAxisTickLabelLimit),E=Math.min(P,n.yTickWordWrapLinesLimit),M=E*_.height;O?(C.w=M,C.h=n.yAxisTickLabelLimit):(C.w=n.yAxisTickLabelLimit,C.h=M)}var F=A+D.h,j=S+C.w,N=n.xFontLabelHeight,W=n.yFontLabelHeight,R=n.distToXAxisLabel,z=n.distToYAxisLabel;if(t.guide.x.density=D.w+2*h,t.guide.y.density=C.h+2*g,a){var I=(k-N)/2;t.guide.x.label.padding=0+N-R+I,t.guide.y.label.padding=0-z+I,t.guide.x.label.cssClass+=" inline",t.guide.x.label.dock="right",t.guide.x.label.textAnchor="end",t.guide.y.label.cssClass+=" inline",t.guide.y.label.dock="right",t.guide.y.label.textAnchor="end",t.guide.padding.b=k+F,t.guide.padding.l=L+j,t.guide.padding.b=t.guide.x.hide?0:t.guide.padding.b,t.guide.padding.l=t.guide.y.hide?0:t.guide.padding.l}else{t.guide.x.label.padding=+N+(t.guide.x.label.text?F+R:0),t.guide.y.label.padding=-N+(t.guide.y.label.text?j+z:0);var B=t.guide.x.label.text?t.guide.x.label.padding+N:F,U=t.guide.y.label.text?t.guide.y.label.padding+W:j;t.guide.padding.b=k+B-A,t.guide.padding.l=L+U,t.guide.padding.b=t.guide.x.hide?0:t.guide.padding.b,t.guide.padding.l=t.guide.y.hide?0:t.guide.padding.l}return t.guide.x.tickFontHeight=w.height,t.guide.y.tickFontHeight=_.height,t.guide.x.$minimalDomain=m.length,t.guide.y.$minimalDomain=v.length,t.guide.x.$maxTickTextW=w.width,t.guide.x.$maxTickTextH=w.height,t.guide.y.$maxTickTextW=_.width,t.guide.y.$maxTickTextH=_.height,t},h={NONE:function(t,e,n){var i=r.clone(t);return g(r.clone(i.unit),i.unit,function(t,e){return e.guide.x.tickFontHeight=n.getAxisTickLabelSize("X").height,e.guide.y.tickFontHeight=n.getAxisTickLabelSize("Y").height,e.guide.x.tickFormatWordWrapLimit=n.xAxisTickLabelLimit,e.guide.y.tickFormatWordWrapLimit=n.yAxisTickLabelLimit,e}),i},"BUILD-LABELS":function(t){var e=r.clone(t),n=[],i=[],a=null,o=null;return r.traverseJSON(e.unit,"unit",l,function(t,e){if(t.isLeaf)return e;!a&&e.x&&(a=e),!o&&e.y&&(o=e),e.guide=e.guide||{},e.guide.x=e.guide.x||{label:""},e.guide.y=e.guide.y||{label:""},e.guide.x.label=_.isObject(e.guide.x.label)?e.guide.x.label:{text:e.guide.x.label},e.guide.y.label=_.isObject(e.guide.y.label)?e.guide.y.label:{text:e.guide.y.label},e.x&&(e.guide.x.label.text=e.guide.x.label.text||e.x),e.y&&(e.guide.y.label.text=e.guide.y.label.text||e.y);var r=e.guide.x.label.text;r&&(n.push(r),e.guide.x.tickFormatNullAlias=e.guide.x.hasOwnProperty("tickFormatNullAlias")?e.guide.x.tickFormatNullAlias:"No "+r,e.guide.x.label.text="");var u=e.guide.y.label.text;return u&&(i.push(u),e.guide.y.tickFormatNullAlias=e.guide.y.hasOwnProperty("tickFormatNullAlias")?e.guide.y.tickFormatNullAlias:"No "+u,e.guide.y.label.text=""),e}),a&&(a.guide.x.label.text=n.join(" > ")),o&&(o.guide.y.label.text=i.join(" > ")),e},"BUILD-GUIDE":function(t,e,n){var i=r.clone(t);return g(r.clone(i.unit),i.unit,function(t,i){if(t.isLeaf)return i;t.isLeafParent&&!i.guide.hasOwnProperty("showGridLines")&&(i.guide.showGridLines="xy");var r=!t.isLeaf&&!t.isLeafParent;r&&(i.guide.x.cssClass+=" facet-axis",i.guide.y.cssClass+=" facet-axis");var a=e.dimension(i.x),u=e.dimension(i.y),s="measure"===a.dimType,l="measure"===u.dimType,f=n.hasOwnProperty("xDensityPadding:"+a.dimType)?n["xDensityPadding:"+a.dimType]:n.xDensityPadding,h=n.hasOwnProperty("yDensityPadding:"+u.dimType)?n["yDensityPadding:"+u.dimType]:n.yDensityPadding,g=e.scaleMeta(i.x,i.guide.x),p=g.values,m=e.scaleMeta(i.y,i.guide.y),y=m.values;i.guide.x.tickFormat=i.guide.x.tickFormat||d(a,g,n.defaultFormats),i.guide.y.tickFormat=i.guide.y.tickFormat||d(u,m,n.defaultFormats);var v=0===p.length,x=0===y.length,b=c(p,o.get(i.guide.x.tickFormat,i.guide.x.tickFormatNullAlias),n.getAxisTickLabelSize,n.xAxisTickLabelLimit),w=c(y,o.get(i.guide.y.tickFormat,i.guide.y.tickFormatNullAlias),n.getAxisTickLabelSize,n.yAxisTickLabelLimit),_=t.isLeafParent?n.xAxisPadding:0,k=t.isLeafParent?n.yAxisPadding:0,L=!r&&!!a.dimType&&"measure"!==a.dimType;i.guide.x.padding=v?0:_,i.guide.y.padding=x?0:k,i.guide.x.rotate=L?90:0,i.guide.x.textAnchor=L?"start":i.guide.x.textAnchor;var T=v?0:n.xTickWidth,O=x?0:n.yTickWidth;i.guide.x.tickFormatWordWrapLimit=n.xAxisTickLabelLimit,i.guide.y.tickFormatWordWrapLimit=n.yAxisTickLabelLimit;var A=L?b.width:b.height;!s&&A>n.xAxisTickLabelLimit&&(A=n.xAxisTickLabelLimit),!L&&b.width>n.xAxisTickLabelLimit&&(i.guide.x.tickFormatWordWrap=!0,i.guide.x.tickFormatWordWrapLines=n.xTickWordWrapLinesLimit,A=n.xTickWordWrapLinesLimit*b.height);var S=w.width;!l&&S>n.yAxisTickLabelLimit&&(S=n.yAxisTickLabelLimit,i.guide.y.tickFormatWordWrap=!0,i.guide.y.tickFormatWordWrapLines=n.yTickWordWrapLinesLimit);var D=T+A,P=O+S,E=n.xFontLabelHeight,M=n.yFontLabelHeight,C=n.distToXAxisLabel,F=n.distToYAxisLabel,j=Math.min(n.xAxisTickLabelLimit,L?b.height:b.width);i.guide.x.density=j+2*f;var N=Math.ceil(w.width/n.yAxisTickLabelLimit),W=Math.min(N,n.yTickWordWrapLinesLimit),R=Math.min(n.yAxisTickLabelLimit,W*w.height);i.guide.y.density=R+2*h,i.guide.x.label.padding=i.guide.x.label.text?D+C:0,i.guide.y.label.padding=i.guide.y.label.text?P+F:0;var z=i.guide.x.label.text?i.guide.x.label.padding+E:D,I=i.guide.y.label.text?i.guide.y.label.padding+M:P;return i.guide.padding.b=_+z,i.guide.padding.l=k+I,i.guide.padding.b=i.guide.x.hide?0:i.guide.padding.b,i.guide.padding.l=i.guide.y.hide?0:i.guide.padding.l,i.guide.x.tickFontHeight=b.height,i.guide.y.tickFontHeight=w.height,i.guide.x.$minimalDomain=p.length,i.guide.y.$minimalDomain=y.length,i.guide.x.$maxTickTextW=b.width,i.guide.x.$maxTickTextH=b.height,i.guide.y.$maxTickTextW=w.width,i.guide.y.$maxTickTextH=w.height,i}),i},"BUILD-COMPACT":function(t,e,n){var i=r.clone(t);return g(r.clone(i.unit),i.unit,function(t,i){return t.isLeaf?i:t.isLeafParent?(i.guide.showGridLines=i.guide.hasOwnProperty("showGridLines")?i.guide.showGridLines:"xy",f(i,e,_.defaults({xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),!0,!1,!0)):(i.guide.x.cssClass+=" facet-axis compact",i.guide.y.cssClass+=" facet-axis compact",f(i,e,_.defaults({xAxisPadding:0,yAxisPadding:0,distToXAxisLabel:0,distToYAxisLabel:0,xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),!1,!0,!1))}),i},"OPTIMAL-SIZE":function(t,e,n){var i=r.clone(t),a=function(t){var e;if(t.unit){var n=a(t.unit[0]),i=t.guide,r=i.x.$minimalDomain||1,o=i.y.$minimalDomain||1,u=Math.max(r*i.x.density,r*n.w),s=Math.max(o*i.y.density,o*n.h);e={w:u+i.padding.l+i.padding.r,h:s+i.padding.t+i.padding.b}}else e={w:0,h:0};return e},o=function(t,e,n,i){var r=e.guide.x.$minimalDomain||1,a=e.guide.y.$minimalDomain||1,u=n.width/r,s=n.height/a,l=t.dimension(e.x),c=t.dimension(e.y),d=i.hasOwnProperty("xDensityPadding:"+l.dimType)?i["xDensityPadding:"+l.dimType]:i.xDensityPadding,f=i.hasOwnProperty("yDensityPadding:"+c.dimType)?i["yDensityPadding:"+c.dimType]:i.yDensityPadding;if(e.guide.x.hide!==!0&&0!==e.guide.x.rotate&&u>e.guide.x.$maxTickTextW+2*d){e.guide.x.rotate=0,e.guide.x.textAnchor="middle",e.guide.x.tickFormatWordWrapLimit=u;var h=Math.min(i.xAxisTickLabelLimit,e.guide.x.$maxTickTextW),g=0-h+e.guide.x.$maxTickTextH;e.guide.padding.b+=e.guide.padding.b>0?g:0,e.guide.x.label.padding>h+i.xAxisPadding&&(e.guide.x.label.padding+=g)}e.guide.y.hide!==!0&&0!==e.guide.y.rotate&&1===e.guide.y.tickFormatWordWrapLines&&s>e.guide.y.$maxTickTextW+2*f&&(e.guide.y.tickFormatWordWrapLimit=s-2*f);var p={width:u,height:s};e.unit&&o(t,e.unit[0],p,i)},u=a(i.unit),s=u.w,l=u.h,c=n.size,d=n.getScrollBarWidth(),f=c.width-s,h=c.height-l,g=f>=0?c.width:s,p=h>=0?0:d,m=h>=0?c.height:l,y=f>=0?0:d;return n.size.height=m-y,n.size.width=g-p,o(e,i.unit,n.size,n),i}};h.AUTO=function(t,e,n){return["BUILD-LABELS","BUILD-GUIDE"].reduce(function(t,i){return h[i](t,e,n)},t)},h.COMPACT=function(t,e,n){return["BUILD-LABELS","BUILD-COMPACT"].reduce(function(t,i){return h[i](t,e,n)},t)};var g=function(t,e,n){var i=a.applyNodeDefaults(e);i=n(l(i),i),i=u(i,t);var o=_.omit(i,"unit");return(i.unit||[]).forEach(function(t){return g(r.clone(t),s(t,o),n)}),i},p={get:function(t,e){var n=h[t]||h.NONE;return function(t,i){var r=n(t,i,e);return e.fitSize&&(r=h["OPTIMAL-SIZE"](r,i,e)),r}}};e.SpecEngineFactory=p,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t){return t&&t.__esModule?t["default"]:t},r=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(9).UnitDomainPeriodGenerator,u=n(2).utils,s=n(36).sizeScale,l=i(n(7)),c=i(n(4)),d={ordinal:function(t){return t},linear:function(t,e){var n=e.autoScale?u.autoScale(t):c.extent(t),i=l.isNumber(e.min)?e.min:n[0],r=l.isNumber(e.max)?e.max:n[1];return[Math.min(i,n[0]),Math.max(r,n[1])]},period:function(t,e){var n=c.extent(t),i=l.isNull(e.min)||l.isUndefined(e.min)?n[0]:new Date(e.min).getTime(),r=l.isNull(e.max)||l.isUndefined(e.max)?n[1]:new Date(e.max).getTime(),a=[new Date(Math.min(i,n[0])),new Date(Math.max(r,n[1]))];return o.generate(a[0],a[1],e.period)},time:function(t,e){var n=c.extent(t),i=l.isNull(e.min)||l.isUndefined(e.min)?n[0]:new Date(e.min).getTime(),r=l.isNull(e.max)||l.isUndefined(e.max)?n[1]:new Date(e.max).getTime();return[new Date(Math.min(i,n[0])),new Date(Math.max(r,n[1]))]}},f={ordinal:function(t,e){return c.scale.ordinal().domain(t).rangePoints(e,1)},linear:function(t,e){return c.scale.linear().domain(t).rangeRound(e,1)},period:function(t,e){return c.scale.ordinal().domain(t).rangePoints(e,1)},time:function(t,e){return c.time.scale().domain(t).range(e)}};e.UnitDomainMixin=function(){function t(e,n){a(this,t);var i=function(t){return function(e){var n=e||{};return n.hasOwnProperty(t)?n[t]:null}},r=function(t){var n=e[t]||{},r=n.value?i(n.value):function(t){return t},a=l.contains(["period","time"],n.scale);return a?l.compose(function(t){return new Date(t).getTime()},r):r},u=function(t){var n=e[t]||{};return n.order||null},h=function(t){var e={category:function(t,e,n){return n},order:function(t,e,n){var i=u(t);return i?l.union(i,n):l.sortBy(n,e)},measure:function(t,e,n){return l.sortBy(n,e)},"as-is":function(t,e,n){return n}};return e[t]||e["as-is"]},g=function(t){var e={category:h("category"),order:h("order"),measure:h("measure"),"as-is":h("as-is")};return e[t]||e["as-is"]};this.fnDimension=function(t,n){var i=(n||{}).dimensions||{},r=e[t]||{},a=i[t]||{};return{scaleDim:t,scaleType:a.scale||r.scale,dimType:a.type||r.type}},this.fnSource=function(t){var e=l.map(t,function(t,e){return function(n){return r(e)(n[e])===t}});return l(n).filter(function(t){return l.every(e,function(e){return e(t)})})};var p=function(t,i){if(!e[t])return[];var a=r(t),o=l(n).chain().pluck(t).uniq(a).value();return i(t,a,o)};this.fnDomain=function(t){var n=r(t),i=(e[t]||{}).type,a=p(t,h(i));return a.map(n)};var m=function(t,n){var a={},u=n||{};a.map=u.hasOwnProperty("map")?u.map:u.tickLabel,a.min=u.hasOwnProperty("min")?u.min:u.tickMin,a.max=u.hasOwnProperty("max")?u.max:u.tickMax,a.period=u.hasOwnProperty("period")?u.period:u.tickPeriod,a.autoScale=u.autoScale;var s=l.defaults({},e[t]),c={"order:period":function(t){return function(e){return o.get(t.period).cast(new Date(e))}},"*":function(){return function(t){return t}}},f=a.map?i(a.map):r(t),h=[s.type,s.scale].join(":"),m=(c[h]||c["*"])(a),y=p(t,g(s.type)).map(f),v=s.scale?d[s.scale](y,a):y;return{extract:function(t){return m(f(t))},values:v,source:y}};this.fnScaleMeta=m,this.fnScaleTo=function(t,n,i){var r=i||{},a=l.defaults({},e[t]),o=m(t,i),u=f[a.scale](o.values,n,r),s=function(t){return u(o.extract(t))};return Object.keys(u).forEach(function(t){return s[t]=u[t]}),s},this.fnScaleColor=function(t,e,n){var i,r=n||{},a=m(t,r),o=l.constant("color-default"),u=l.times(20,function(t){return"color20-"+(1+t)}),s=function(t,e){if(0===t.length||1===t.length&&null===t[0])return o;var n=t.map(function(t){return String(t).toString()});return c.scale.ordinal().range(e).domain(n)},d=function(t,e){var n=l.keys(t),i=l.values(t),r=c.scale.ordinal().range(i).domain(n);return function(n){return t.hasOwnProperty(n)?r(n):e(n)}},f=function(t){return function(e){return t(String(e).toString())}};if(e)if(l.isArray(e))i=f(s(a.values,e));else if(l.isFunction(e))i=function(t){return e(t,f(s(a.values,u)))};else{if(!l.isObject(e))throw new Error("This brewer is not supported");i=d(e,o)}else i=f(s(a.values,u));var h=function(t){return i(a.extract(t))};return h.get=h,h.dimension=t,h.legend=function(t){var e=a.extract(t),n=r.tickLabel?(t||{})[r.tickLabel]:e,o=i(e);return{value:e,color:o,label:n}},h},this.fnScaleSize=function(t,e,n){var i=n||{},r=e[0],a=e[1],o=e[e.length-1],u=m(t,i),l=s(u.source,r,a,o),c=function(t){return l(u.extract(t))};return c}}return r(t,null,{mix:{value:function(t){return t.dimension=this.fnDimension,t.source=this.fnSource,t.domain=this.fnDomain,t.scaleMeta=this.fnScaleMeta,t.scaleTo=this.fnScaleTo,t.scaleDist=this.fnScaleTo,t.scaleColor=this.fnScaleColor,t.scaleSize=this.fnScaleSize,t.partition=function(){return t.data||t.source(t.$where)},t.groupBy=function(e,n){var i=t.scaleMeta(n);return l.chain(e).groupBy(function(t){return i.extract(t[n])}).map(function(t){return{key:t[0][n],values:t}}).value()},t},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(1).CSS_PREFIX,r=function(t,e){var n="div",r=document.createElement(n);return r.classList.add(i+t),e&&e.appendChild(r),r},a=function(){var t=r("layout"),e=r("layout__header",t),n=r("layout__container",t),i=r("layout__sidebar",n),a=r("layout__content",n),o=r("layout__content__wrap",a),u=r("layout__sidebar-right",n),s=r("layout__sidebar-right__wrap",u),l=r("layout__footer",t);return{layout:t,header:e,content:o,leftSidebar:i,rightSidebar:s,footer:l}};e.getLayout=a,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function i(t,e){for(var n in e)t[n]=e[n];return t}function r(t){return t&&null!=t.setInterval}function a(t){var e=f.pageYOffset||p.scrollTop,n=f.pageXOffset||p.scrollLeft,a={left:0,right:0,top:0,bottom:0,width:0,height:0};if(r(t))a.width=f.innerWidth||p.clientWidth,a.height=f.innerHeight||p.clientHeight;else{if(!p.contains(t)||null==t.getBoundingClientRect)return a;i(a,t.getBoundingClientRect()),a.width=a.right-a.left,a.height=a.bottom-a.top}return a.top=a.top+e-p.clientTop,a.left=a.left+n-p.clientLeft,a.right=a.left+a.width,a.bottom=a.top+a.height,a}function o(t){return 0|Math.round(String(t).replace(/[^\-0-9.]/g,""))}function u(t){var e=String(y(t,u.propName)),n=e.match(/([0-9.]+)([ms]{1,2})/);return n&&(e=Number(n[1]),"s"===n[2]&&(e*=1e3)),0|e}function s(t,e){return this instanceof s?(this.hidden=1,this.options=i(v(s.defaults),e),this._createElement(),void(t&&this.content(t))):new s(t,e)}var l=n(1).CSS_PREFIX,c=function(t){return{add:function(e){t.classList.add(e)},remove:function(e){t.classList.remove(e)}}},d=function(t,e){return t.indexOf(e)},f=window,h=f.document,g=h.body,p=h.documentElement,m=["top","bottom"],y=f.getComputedStyle;u.propName=function(){for(var t=h.createElement("div"),e=["transitionDuration","webkitTransitionDuration"],n="1s",i=0;i<e.length;i++)if(t.style[e[i]]=n,t.style[e[i]]===n)return e[i]}();var v=Object.create;s.prototype._createElement=function(){this.element=h.createElement("div"),this.classes=c(this.element),this.classes.add(this.options.baseClass);for(var t,e=0;e<s.classTypes.length;e++)t=s.classTypes[e]+"Class",this.options[t]&&this.classes.add(this.options[t])},s.prototype.type=function(t){return this.changeClassType("type",t)},s.prototype.effect=function(t){return this.changeClassType("effect",t)},s.prototype.changeClassType=function(t,e){return t+="Class",this.options[t]&&this.classes.remove(this.options[t]),this.options[t]=e,e&&this.classes.add(e),this},s.prototype.updateSize=function(){return this.hidden&&(this.element.style.visibility="hidden",g.appendChild(this.element)),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,null==this.spacing&&(this.spacing=null!=this.options.spacing?this.options.spacing:o(y(this.element,"top"))),this.hidden?(g.removeChild(this.element),this.element.style.visibility=""):this.position(),this},s.prototype.content=function(t){return"object"==typeof t?(this.element.innerHTML="",this.element.appendChild(t)):this.element.innerHTML=t,this.updateSize(),this},s.prototype.place=function(t){return this.options.place=t,this.hidden||this.position(),this},s.prototype.attach=function(t){return this.attachedTo=t,this.hidden||this.position(),this},s.prototype.detach=function(){return this.hide(),this.attachedTo=null,this},s.prototype._pickPlace=function(t){if(!this.options.auto)return this.options.place;var e=a(f),n=this.options.place.split("-"),i=this.spacing;if(~d(m,n[0]))switch(t.top-this.height-i<=e.top?n[0]="bottom":t.bottom+this.height+i>=e.bottom&&(n[0]="top"),n[1]){case"left":t.right-this.width<=e.left&&(n[1]="right");break;case"right":t.left+this.width>=e.right&&(n[1]="left");break;default:t.left+t.width/2+this.width/2>=e.right?n[1]="left":t.right-t.width/2-this.width/2<=e.left&&(n[1]="right")}else switch(t.left-this.width-i<=e.left?n[0]="right":t.right+this.width+i>=e.right&&(n[0]="left"),n[1]){case"top":t.bottom-this.height<=e.top&&(n[1]="bottom");break;case"bottom":t.top+this.height>=e.bottom&&(n[1]="top");break;default:t.top+t.height/2+this.height/2>=e.bottom?n[1]="top":t.bottom-t.height/2-this.height/2<=e.top&&(n[1]="bottom")}return n.join("-")},s.prototype.position=function(t,e){this.attachedTo&&(t=this.attachedTo),null==t&&this._p?(t=this._p[0],e=this._p[1]):this._p=arguments;var n="number"==typeof t?{left:0|t,right:0|t,top:0|e,bottom:0|e,width:0,height:0}:a(t),i=this.spacing,r=this._pickPlace(n);r!==this.curPlace&&(this.curPlace&&this.classes.remove(this.curPlace),this.classes.add(r),this.curPlace=r);var o,u;switch(this.curPlace){case"top":o=n.top-this.height-i,u=n.left+n.width/2-this.width/2;break;case"top-left":o=n.top-this.height-i,u=n.right-this.width;break;case"top-right":o=n.top-this.height-i,u=n.left;
break;case"bottom":o=n.bottom+i,u=n.left+n.width/2-this.width/2;break;case"bottom-left":o=n.bottom+i,u=n.right-this.width;break;case"bottom-right":o=n.bottom+i,u=n.left;break;case"left":o=n.top+n.height/2-this.height/2,u=n.left-this.width-i;break;case"left-top":o=n.bottom-this.height,u=n.left-this.width-i;break;case"left-bottom":o=n.top,u=n.left-this.width-i;break;case"right":o=n.top+n.height/2-this.height/2,u=n.right+i;break;case"right-top":o=n.bottom-this.height,u=n.right+i;break;case"right-bottom":o=n.top,u=n.right+i}return this.element.style.top=Math.round(o)+"px",this.element.style.left=Math.round(u)+"px",this},s.prototype.show=function(t,e){return t=this.attachedTo?this.attachedTo:t,clearTimeout(this.aIndex),null!=t&&this.position(t,e),this.hidden&&(this.hidden=0,g.appendChild(this.element)),this.attachedTo&&this._aware(),this.options.inClass&&(this.options.effectClass&&void this.element.clientHeight,this.classes.add(this.options.inClass)),this},s.prototype.getElement=function(){return this.element},s.prototype.hide=function(){if(!this.hidden){var t=this,e=0;return this.options.inClass&&(this.classes.remove(this.options.inClass),this.options.effectClass&&(e=u(this.element))),this.attachedTo&&this._unaware(),clearTimeout(this.aIndex),this.aIndex=setTimeout(function(){t.aIndex=0,g.removeChild(t.element),t.hidden=1},e),this}},s.prototype.toggle=function(t,e){return this[this.hidden?"show":"hide"](t,e)},s.prototype.destroy=function(){clearTimeout(this.aIndex),this._unaware(),this.hidden||g.removeChild(this.element),this.element=this.options=null},s.prototype._aware=function(){var t=d(s.winAware,this);~t||s.winAware.push(this)},s.prototype._unaware=function(){var t=d(s.winAware,this);~t&&s.winAware.splice(t,1)},s.reposition=function(){function t(){!n&&s.winAware.length&&(n=i(e))}function e(){n=0;for(var t,e=0,i=s.winAware.length;i>e;e++)t=s.winAware[e],t.position()}var n,i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,17)};return t}(),s.winAware=[],window.addEventListener("resize",s.reposition),window.addEventListener("scroll",s.reposition),s.classTypes=["type","effect"],s.defaults={baseClass:l+"tooltip",typeClass:null,effectClass:null,inClass:"in",place:"top",spacing:null,auto:0},e.Tooltip=s,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function i(t,e,n){return e.reduce(function(e,i,r){var a=t[i];return a?e.status!=m.FAIL&&("measure"===a.type&&(e.countMeasureAxis++,e.indexMeasureAxis.push(r)),"measure"!==a.type&&1===e.countMeasureAxis?e.status=m.WARNING:e.countMeasureAxis>1&&(e.status=m.FAIL,e.messages.push('There is more than one measure dimension for "'+n+'" axis'))):(e.status=m.FAIL,e.messages.push(i?'"'+i+'" dimension is undefined for "'+n+'" axis':'"'+n+'" axis should be specified')),e},{status:m.SUCCESS,countMeasureAxis:0,indexMeasureAxis:[],messages:[],axis:n})}function r(t,e){for(var n=g(e.x),r=g(e.y),a=Math.max(n.length,r.length),o=g(e.guide);o.length<a;)o.push({});o=o.slice(0,a);var u=i(e.dimensions,n,"x"),s=i(e.dimensions,r,"y");n=y[u.status](n,u,o),r=y[s.status](r,s,o);for(var l={type:"COORDS.RECT",unit:[]},c=a;c>0;c--){var d=n.pop(),f=r.pop(),m=o.pop()||{};c===a?(l.x=d,l.y=f,l.unit.push(p(t,{x:h(d),y:h(f),color:e.color,size:e.size,flip:e.flip,colorGuide:m.color,sizeGuide:m.size})),l.guide=_.defaults(m,{x:{label:d},y:{label:f}})):l={type:"COORDS.RECT",x:h(d),y:h(f),unit:[l],guide:_.defaults(m,{x:{label:d},y:{label:f}})}}return e.spec={dimensions:e.dimensions,unit:l},e}var a=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})},o=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},u=function b(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:b(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=n(12).Plot,d=n(2).utils,f=n(13).DataProcessor,h=function(t){return t?t:null},g=function(t){return d.isArray(t)?0===t.length?[null]:t:[t]},p=function(t,e){return{type:t,x:e.x,y:e.y,color:e.color,guide:{color:e.colorGuide,size:e.sizeGuide},flip:e.flip,size:e.size}},m={SUCCESS:"SUCCESS",WARNING:"WARNING",FAIL:"FAIL"},y=function(){var t={};return a(t,m.SUCCESS,function(t){return t}),a(t,m.FAIL,function(t,e){throw new Error((e.messages||[]).join("\n")||"This configuration is not supported, See http://api.taucharts.com/basic/facet.html#easy-approach-for-creating-facet-chart")}),a(t,m.WARNING,function(t,e,n){var i=e.axis,r=e.indexMeasureAxis[0],a=t[r],o=_.without(t,a);o.push(a);var u=n[r][i]||{},s=n[n.length-1][i]||{};return n[n.length-1][i]=u,n[r][i]=s,o}),t}(),v={scatterplot:function(t){return r("ELEMENT.POINT",t)},line:function(t){var e=t.data,n=t.settings.log,i={none:function(){return null},horizontal:function(t){var e=d.isArray(t.x)?t.x:[t.x];return e[e.length-1]},vertical:function(t){var e=d.isArray(t.y)?t.y:[t.y];return e[e.length-1]},auto:function(t){var i,r=d.isArray(t.x)?t.x:[t.x],a=d.isArray(t.y)?t.y:[t.y],o=r[r.length-1],u=r.slice(0,r.length-1),s=a[a.length-1],l=a.slice(0,a.length-1),c=t.color,h=u.concat(l).concat([c]).filter(function(t){return null!==t}),g=-1,p=[[[o].concat(h),s],[[s].concat(h),o]],m=p.some(function(t,i){var r=t[0],a=t[1],o=f.isYFunctionOfX(e,r,[a]);return o.result?g=i:n(["Attempt to find a functional relation between",t[0]+" and "+t[1]+" is failed.","There are several "+o.error.keyY+" values (e.g. "+o.error.errY.join(",")+")","for ("+o.error.keyX+" = "+o.error.valX+")."].join(" ")),o.result});return m?i=p[g][0][0]:(n(["All attempts are failed.","Will orient line horizontally by default.","NOTE: the [scatterplot] chart is more convenient for that data."].join(" ")),i=o),i}},a=(t.lineOrientation||"auto").toLowerCase(),o=i.hasOwnProperty(a)?i[a]:i.auto,u=o(t);return null!==u&&(t.data=_(e).sortBy(u)),r("ELEMENT.LINE",t)},bar:function(t){return t.flip=!1,r("ELEMENT.INTERVAL",t)},horizontalBar:function(t){return t.flip=!0,r("ELEMENT.INTERVAL",t)}},x=function(t){function e(t){l(this,e),t=_.defaults(t,{autoResize:!0}),t.autoResize&&e.winAware.push(this),t.settings=this.setupSettings(t.settings),t.dimensions=this.setupMetaInfo(t.dimensions,t.data);var n=v[t.type];if(!_.isFunction(n))throw new Error("Chart type "+t.type+" is not supported. Use one of "+_.keys(v).join(", ")+".");u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,n(t))}return s(e,t),o(e,null,{destroy:{value:function(){var t=e.winAware.indexOf(this);-1!==t&&e.winAware.splice(t,1),u(Object.getPrototypeOf(e.prototype),"destroy",this).call(this)},writable:!0,configurable:!0}}),e}(c);x.resizeOnWindowEvent=function(){function t(){!n&&x.winAware.length&&(n=i(e))}function e(){n=0;for(var t,e=0,i=x.winAware.length;i>e;e++)t=x.winAware[e],t.resize()}var n,i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,17)};return t}(),x.winAware=[],window.addEventListener("resize",x.resizeOnWindowEvent),e.Chart=x,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function m(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=n(15).Emitter,s=n(2).utils,l=n(6).utilsDom,c=n(10).UnitsRegistry,d=n(19).getLayout,f=n(35).ScalesFactory,h=n(1).CSS_PREFIX,g={cross:function(t,e,n){var i=function(t){return t instanceof Date?t.getTime():t},r=t(),a=_(r).chain().pluck(e).unique(i).value(),o=_(r).chain().pluck(n).unique(i).value(),u=0===a.length?[null]:a,s=0===o.length?[null]:o;return _(s).reduce(function(t,r){return t.concat(_(u).map(function(t){var a={};return e&&(a[e]=i(t)),n&&(a[n]=i(r)),a}))},[])},none:function(){return[null]}},p=function(t,e){var n=_.pick(e||{},"source","pipe"),i=t.source,r=t.inherit,a={source:i,pipe:[]};if(r&&a.source!==n.source)throw new Error("base ["+n.source+"] and own ["+a.source+"] sources should be equal to apply inheritance");return r?n:a};e.GPL=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._svg=null,this._filtersStore={filters:{},tick:0},this._layout=d(),this._initialize(t)}return a(e,t),i(e,null,{_initialize:{value:function(t){this.config=t,this.unitSet=c,this.sources=t.sources,this.scalesCreator=new f(t.sources),this.scales=t.scales,this.trans=t.trans},writable:!0,configurable:!0},render:{value:function(t,e){var n=d3.select(t).node();if(null===n)throw new Error("Target element not found");n.appendChild(this._layout.layout);var i=(this._layout.content,d3.select(this._layout.content)),r=_.clone(e)||{};r.width&&r.height||(r=_.defaults(r,l.getContainerSize(n))),this.root=this.expandUnitsStructure(this.config.unit),i.selectAll("svg").data(["const"]).enter().append("svg").attr(_.extend({"class":""+h+"svg"},r)),this.root.options={container:d3.select(i.selectAll("svg").node()),left:0,top:0,width:r.width,height:r.height},this._drawUnitsStructure(this.root)},writable:!0,configurable:!0},expandUnitsStructure:{value:function(t){var e=this,n=void 0===arguments[1]?[]:arguments[1];if(t.expression.operator!==!1){var i=this._parseExpression(t.expression,n);t.transformation=t.transformation||[],t.frames=i.exec().map(function(e){var r=n.concat([{type:"where",args:e}]).concat(t.transformation),a={source:i.source,pipe:r};return e&&(a.key=e),a.unit=t.unit?t.unit.map(function(t){return s.clone(t)}):[],a})}return t.frames.map(function(t){return t.unit.map(function(n){return e.expandUnitsStructure(n,t.pipe)}),t}),t},writable:!0,configurable:!0},_drawUnitsStructure:{value:function(t){var e=void 0===arguments[1]?null:arguments[1],n=this,i=n._datify(p(t.expression,e)),r=n.unitSet.get(t.type),a=new r(t);return a.drawLayout(function(t,e,r){var a=e?e:""+t+":default";return a=a.scaleDim||a,n.scalesCreator.create(n.scales[a],i,r)}).drawFrames(t.frames.map(n._datify.bind(n)),n._drawUnitsStructure.bind(n)),t},writable:!0,configurable:!0},_datify:{value:function(t){var e=this.sources[t.source].data,n=this.trans;return t.take=function(){return t.pipe.reduce(function(t,e){return n[e.type](t,e.args)},e)},t.data=t.take(),t},writable:!0,configurable:!0},_parseExpression:{value:function(t,e){var n=this,i=t.operator||"none",r=t.source,a=t.inherit,o=t.params,u=this.sources[r],s=a?function(){return e.reduce(function(t,e){return n.trans[e.type](t,e.args)},u.data)}:function(){return u.data},l=g[i];if(!l)throw new Error(""+i+" operator is not supported");return{source:r,func:l,args:o,exec:function(){return l.apply(null,[s].concat(o))}}},writable:!0,configurable:!0}}),e}(u)}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=(n(3).utilsDraw,n(1).CSS_PREFIX,{draw:function(t){t.color=t.dimension(t.color,t);var e=t.guide.color||{},n=t.scaleColor(t.color.scaleDim,e.brewer,e),i=t.options,r=t.x.reduce(function(e,n){return e[n]=t.scaleTo(n,[i.height,0],{}),e},{}),a=d3.nest().key(function(t){return t[n.dimension]}).entries(t.partition()).map(function(e){var n=e.values[0],i=[];return t.x.forEach(function(t){i.push({key:t,val:n[t]})}),i}),o=function(){this.attr("class",function(){return"graphical-report__line line color20-9"});var t=this.selectAll("path").data(function(t){return[t]});t.call(c),t.enter().append("path").call(c),t.exit().remove()},u=i.width/(t.x.length-1),s={};t.x.forEach(function(t,e){s[t]=e*u});var l=d3.svg.line().x(function(t){return s[t.key]}).y(function(t){return r[t.key](t.val)}),c=function(){this.attr("d",l)},d=i.container.selectAll(".line").data(a);d.call(o),d.enter().append("g").call(o),d.exit().remove()}});e.CoordsParallelLine=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(3).utilsDraw,r=(n(1).CSS_PREFIX,n(2).utils),a=n(8).TMatrix,o=function(t,e,n){var i=_.defaults(r.clone(t),_.pick.apply(_,[e].concat(n)));return i.guide=_.extend(r.clone(e.guide||{}),i.guide||{}),i},u={walk:function(t,e){var n=_.defaults(t,{$where:{}}),i=new a(1,1),r=new a(1,1);return i.iterate(function(t,e){var i=_.extend({},n.$where),a=_(n.unit).map(function(t){return _.extend(o(t,n,["x"]),{$where:i})});r.setRC(t,e,a)}),n.$matrix=r,r.iterate(function(t,n,i){_.each(i,function(t){return e(t)})}),n},draw:function(t){var e=t.options,n=t.guide.padding,r=e.left+n.l,a=e.top+n.t,o=e.width-(n.l+n.r),u=e.height-(n.t+n.b),s=t.x.map(function(e){return t.scaleTo(e,[u,0],{})}),l=e.container.append("g").attr("class","graphical-report__cell cell").attr("transform",i.translate(r,a)),c=function(t,e){return"translate("+t+","+e+")"},d=function(t){return"rotate("+t+")"},f=function(t,e){var n=this,i=d3.svg.axis().scale(t).orient("left"),r=n.append("g").attr("class","y axis").attr("transform",c.apply(null,e)).call(i);r.selectAll(".tick text").attr("transform",d(0)).style("text-anchor","end")},h=o/(t.x.length-1);return s.forEach(function(t,e){f.call(l,t,[e*h,0])}),l.append("g").attr("class","grid").attr("transform",c(0,0))}};e.CoordsParallel=u,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t){return t&&t.__esModule?t["default"]:t},r=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},a=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},o=function L(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:L(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=n(3).utilsDraw,l=n(1).CSS_PREFIX,c=(n(2).utils,n(5).FormatterRegistry),d=i(n(7)),f=i(n(4)),h=function(t,e){return"translate("+t+","+e+")"},g=function(t){return"rotate("+t+")"},p=function(t){return d.contains(["bottom","top"],t.toLowerCase())?"h":"v"},m=d.memoize(function(t){return t.node().getComputedTextLength()},function(t){return t.node().textContent.length}),y=function(t,e,n){n=n||m,t.each(function(){var t=f.select(this),i=t.text().split(/\s+/),r=!1,a=i.reduce(function(i,a,o){if(r)return i;var u=o>0?[i,a].join(" "):a,s=n(t.text(u));if(e>s)i=u;else{var l=Math.floor(e/s*u.length);i=u.substr(0,l-4)+"...",r=!0}return i},"");t.text(a)})},v=function(t,e,n,i,r,a){a=a||m;var o=function(t,e,n,i,r,a,o){var u=o*n+a;return t.append("tspan").attr("x",i).attr("y",r).attr("dy",u+"em").text(e)};t.each(function(){var t=f.select(this),u=t.text().split(/\s+/),s=1.1,l=t.attr("x"),c=t.attr("y"),d=parseFloat(t.attr("dy"));t.text(null);var h=o(t,null,s,l,c,d,0),g=!1,p=u.length-1,m=u.reduce(function(t,i,r){if(g)return t;var o=t.length===n||r===p,u=t[t.length-1],s=""!==u?u+" "+i:i,l=a(h.text(s)),c=l>e;if(c&&o){var d=Math.floor(e/l*s.length);t[t.length-1]=s.substr(0,d-4)+"...",g=!0}return c&&!o&&t.push(i),c||(t[t.length-1]=s),t},[""]).filter(function(t){return t.length>0});c=r?-1*(m.length-1)*Math.floor(.5*i):c,m.forEach(function(e,n){return o(t,e,s,l,c,d,n)}),h.remove()})},x=function(t,e,n){var i=t.selectAll(".tick line"),r=n/i[0].length,a=r/2,o="h"===p(e.guide.scaleOrient);if("ordinal"===e.scaleType||"period"===e.scaleType){var u=o?"x":"y",s=o?a:-a;i.attr(u+"1",s).attr(u+"2",s)}},b=function(t,e){var n="h"===p(e.guide.scaleOrient);if(n&&"time"===e.scaleType){var i=t.selectAll(".tick")[0];if(i.length<2)return;var r=parseFloat(i[0].attributes.transform.value.replace("translate(","")),a=parseFloat(i[1].attributes.transform.value.replace("translate(","")),o=a-r,u=0,s=-1,l=t.selectAll(".tick text")[0];if(l.forEach(function(t,e){var n=t.textContent||"",i=n.length;i>u&&(u=i,s=e)}),s>=0){var c=l[s].getBoundingClientRect();o-c.width<8&&t.classed({"graphical-report__d3-time-overflown":!0})}}},w=function(t,e,n){var i=t.selectAll(".tick line"),r="h"===p(e.guide.scaleOrient);if(!r){var a=!1,o=-1;if("time"===e.scaleType)a=!0,o=0;else if("ordinal"===e.scaleType||"period"===e.scaleType){a=!0;var u=n/i[0].length,s=u/2;o=-s}if(a){var l=t.select(".tick").node().cloneNode(!0);t.append(function(){return l}).attr("transform",h(0,n-o))}}},_=function(t,e){var n=p(e.guide.scaleOrient),i="h"===n?1:-1,r=t.append("text").attr("transform",g(e.guide.label.rotate)).attr("class",e.guide.label.cssClass).attr("x",i*e.guide.size*.5).attr("y",i*e.guide.label.padding).style("text-anchor",e.guide.label.textAnchor),a=" > ",o=e.guide.label.text.split(a),u=o.length;if(o.forEach(function(t,e){r.append("tspan").attr("class","label-token label-token-"+e).text(t),u-1>e&&r.append("tspan").attr("class","label-token-delimiter label-token-delimiter-"+e).text(a)}),"right"===e.guide.label.dock){var s=t.selectAll("path.domain").node().getBBox();r.attr("x","h"===n?s.width:0)}else if("left"===e.guide.label.dock){var s=t.selectAll("path.domain").node().getBBox();r.attr("x","h"===n?0:-s.height)}},k=function(t,e){var n="h"===p(e.guide.scaleOrient),i=e.guide.rotate,r=t.selectAll(".tick text");if(r.attr("transform",g(i)).style("text-anchor",e.guide.textAnchor),90===i){var a=parseFloat(r.attr("dy"))/2;r.attr("x",9).attr("y",0).attr("dy",""+a+"em")}e.guide.tickFormatWordWrap?r.call(v,e.guide.tickFormatWordWrapLimit,e.guide.tickFormatWordWrapLines,e.guide.$maxTickTextH,!n):r.call(y,e.guide.tickFormatWordWrapLimit)};e.Cartesian=function(){function t(e){u(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.config=e,this.config.guide=d.defaults(this.config.guide||{},{showGridLines:"xy",padding:{l:50,r:0,t:0,b:50}}),this.config.guide.x=this.config.guide.x||{},this.config.guide.x=d.defaults(this.config.guide.x,{cssClass:"x axis",textAnchor:"middle",padding:10,hide:!1,scaleOrient:"bottom",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),this.config.guide.x.label=d.defaults(this.config.guide.x.label,{text:"X",rotate:0,padding:40,textAnchor:"middle"}),this.config.guide.y=this.config.guide.y||{},this.config.guide.y=d.defaults(this.config.guide.y,{cssClass:"y axis",textAnchor:"start",padding:10,hide:!1,scaleOrient:"left",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),this.config.guide.y.label=d.defaults(this.config.guide.y.label,{text:"Y",rotate:-90,padding:20,textAnchor:"middle"});var n=this.config;if("extract-axes"===n.guide.autoLayout){var i=n.options.container.node().getBBox(),r=n.guide=n.guide||{};r.x.hide=n.options.top+n.options.height<i.height,r.y.hide=n.options.left>0}}return a(t,null,{drawLayout:{value:function(t){var e=this.config,n=e.options,i=e.guide.padding,r=n.left+i.l,a=n.top+i.t,o=n.width-(i.l+i.r),u=n.height-(i.t+i.b);this.x=this.xScale=t("pos",e.x,[0,o]),this.y=this.yScale=t("pos",e.y,[u,0]),e.x=this.xScale,e.y=this.yScale,e.x.scaleObj=this.xScale,e.y.scaleObj=this.yScale,e.x.guide=e.guide.x,e.y.guide=e.guide.y,e.x.guide.size=o,e.y.guide.size=u;var c=""+parseInt(a)+"_"+parseInt(r),d=""+l+"cell cell cell_"+c,f=".cell_"+c;return n.container.selectAll(f).data([{innerLeft:r,innerTop:a,innerWidth:o,innerHeight:u}]).enter().append("g").attr("class",d).transition().duration(750).attr("transform",s.translate(r,a)),e.x.guide.hide||this._fnDrawDimAxis(n.container.selectAll(f),e.x,[0,u+e.guide.x.padding],o,c+"x"),e.y.guide.hide||this._fnDrawDimAxis(n.container.selectAll(f),e.y,[0-e.guide.y.padding,0],u,c+"y"),this.grid=this._fnDrawGrid(n.container.selectAll(f),e,u,o,c),this.W=o,this.H=u,this},writable:!0,configurable:!0},drawFrames:{value:function(t,e){var n=this;return t.reduce(function(t,i){var r;if(i.key){var a=n.x(i.key[n.x.dim]),o=n.y(i.key[n.y.dim]),u=n.x.domain(),s=n.y.domain(),l=n.W/u.length,c=n.H/s.length;r=function(t){return t.options={container:n.grid,left:a-l/2,top:o-c/2,width:l,height:c},t}}else r=function(t){return t.options={container:n.grid,left:0,top:0,width:n.W,height:n.H},t};return i.unit.map(function(t){return e(r(t),i)}),t.concat(i.unit.map(r))},[])},writable:!0,configurable:!0},_fnDrawDimAxis:{value:function(t,e,n,i,a){if(e.scaleDim){var o=f.svg.axis().scale(e.scaleObj).orient(e.guide.scaleOrient),u=c.get(e.guide.tickFormat,e.guide.tickFormatNullAlias);null!==u&&(o.ticks(Math.round(i/e.guide.density)),o.tickFormat(u)),t.selectAll(".axis_"+a).data([a]).enter().append("g").attr("class",e.guide.cssClass+" axis_"+a).attr("transform",s.translate.apply(s,r(n))).call(function(t){t.empty()||(o.call(this,t),x(t,e,i),k(t,e),_(t,e),b(t,e))})}},writable:!0,configurable:!0},_fnDrawGrid:{value:function(t,e,n,i,r){t.selectAll(".grid_"+r).data([r]).enter().append("g").attr("class","grid grid_"+r).attr("transform",h(0,0));var a=t.select(".grid_"+r),o=(e.guide.showGridLines||"").toLowerCase();if(o.length>0){var u=a.append("g").attr("class","grid-lines");if(o.indexOf("x")>-1&&e.x.scaleDim){var s=e.x,l=f.svg.axis().scale(s.scaleObj).orient(s.guide.scaleOrient).tickSize(n),d=c.get(s.guide.tickFormat);null!==d&&(l.ticks(Math.round(i/s.guide.density)),l.tickFormat(d));var g=u.append("g").attr("class","grid-lines-x").call(l);x(g,s,i);var p=g.select("g.tick");if(p.node()&&"translate(0,0)"!==p.attr("transform")){var m=p.node().cloneNode(!0);u.node().appendChild(m),f.select(m).attr("class","border").attr("transform",h(0,0)).select("line").attr("x1",0).attr("x2",0)}}if(o.indexOf("y")>-1&&e.y.scaleDim){var y=e.y,v=f.svg.axis().scale(y.scaleObj).orient(y.guide.scaleOrient).tickSize(-i),d=c.get(y.guide.tickFormat);null!==d&&(v.ticks(Math.round(n/y.guide.density)),v.tickFormat(d));var b=u.append("g").attr("class","grid-lines-y").call(v);x(b,y,n),w(b,y,n)}u.selectAll("text").remove()}return a},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(3).utilsDraw,r=n(1).CSS_PREFIX,a=n(2).utils,o=n(8).TMatrix,u={CROSS:function(t,e,n,i,r){var a=0===n.length?[null]:n,o=0===r.length?[null]:r.reverse(),u=function(t){return t instanceof Date?t.getTime():t};return _(o).map(function(t){return _(a).map(function(n){var r={};return e&&(r[e]=u(n)),i&&(r[i]=u(t)),r})})}},s=function(t){return u[t]||function(){return[[{}]]}},l=function(t,e,n){var i=_.defaults(a.clone(t),_.pick.apply(_,[e].concat(n)));return i.guide=_.extend(a.clone(e.guide),i.guide),i},c={walk:function(t,e){var n=_.defaults(t,{$where:{}}),i=_.any(n.unit,function(t){return 0===t.type.indexOf("COORDS.")}),r=s(i?"CROSS":""),a=n.scaleMeta(n.x,_.omit(n.guide.x,"tickLabel")).values,u=n.scaleMeta(n.y,_.omit(n.guide.y,"tickLabel")).values,c=new o(r(n,n.x,a,n.y,u)),d=new o(c.sizeR(),c.sizeC());return c.iterate(function(t,e,i){var r=_.extend({},n.$where,i),a=_(n.unit).map(function(t){return _.extend(l(t,n,["x","y"]),{$where:r})});d.setRC(t,e,a)}),n.$matrix=d,d.iterate(function(t,n,i){_.each(i,function(t){return e(t)})}),n},draw:function(t){var e=t.options,n=t.guide.padding;t.x.guide=t.guide.x,t.y.guide=t.guide.y;var a=e.left+n.l,o=e.top+n.t,u=e.width-(n.l+n.r),s=e.height-(n.t+n.b);t.x.scaleObj=t.x.scaleDim&&t.scaleTo(t.x.scaleDim,[0,u],t.x.guide),t.y.scaleObj=t.y.scaleDim&&t.scaleTo(t.y.scaleDim,[s,0],t.y.guide),t.x.guide.size=u,t.y.guide.size=s;var l=[0,s+t.guide.x.padding],c=[0-t.guide.y.padding,0],d=e.container.append("g").attr("class",r+"cell cell").attr("transform",i.translate(a,o)).datum({$where:t.$where});return t.x.guide.hide||i.fnDrawDimAxis.call(d,t.x,l,u),t.y.guide.hide||i.fnDrawDimAxis.call(d,t.y,c,s),i.fnDrawGrid.call(d,t,s,u)}};e.coords=c,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function c(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:c(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(1).CSS_PREFIX,u=n(11),s=u.getLineClassesByWidth,l=u.getLineClassesByCount;e.Line=function(){function t(e){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.config=e,this.config.guide=this.config.guide||{},this.config.guide=_.defaults(this.config.guide,{cssClass:""})}return i(t,null,{drawLayout:{value:function(t){var e=this.config;return this.xScale=t("pos",e.x,[0,e.options.width]),this.yScale=t("pos",e.y,[e.options.height,0]),this.color=t("color",e.color,{}),this.size=t("size",e.size,{}),this},writable:!0,configurable:!0},drawFrames:{value:function(t){var e=this.config,n=this.config.options,i=this.xScale,r=this.yScale,a=this.color,u=s(n.width),c=l(t.length),d=function(){this.attr("class",function(t){return""+o+"line i-role-element i-role-datum line "+a(t.key)+" "+u+" "+c+" "+e.guide.cssClass});var t=this.selectAll("path").data(function(t){return[t.take()]});t.call(g),t.enter().append("path").call(g),t.exit().remove()},f=function(t){var e=function(){return this.attr("r",1.5).attr("class",function(t){return""+o+"dot-line dot-line i-role-element "+o+"dot i-role-datum "+a(t[a.dim])}).attr("cx",function(t){return i(t[i.dim])}).attr("cy",function(t){return r(t[r.dim])})},u=n.container.selectAll(".dot-line").data(t);u.call(e),u.exit().remove(),u.enter().append("circle").call(e)},h=d3.svg.line().x(function(t){return i(t[i.dim])}).y(function(t){return r(t[r.dim])});this.config.guide.interpolate&&h.interpolate(this.config.guide.interpolate);var g=function(){this.attr("d",h)},p=t.reduce(function(t,e){var n=e.take();return 1===n.length&&t.push(n[0]),t},[]);p.length>0&&f(p);var m=n.container.selectAll(".line"+parseInt(1e3*Math.random())).data(t);m.call(d),m.enter().append("g").call(d),m.exit().remove()},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function u(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:u(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=(n(1).CSS_PREFIX,n(11));o.getLineClassesByWidth,o.getLineClassesByCount,e.Pie=function(){function t(e){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.config=e,this.config.guide=this.config.guide||{},this.config.guide=_.defaults(this.config.guide,{cssClass:""})}return i(t,null,{drawLayout:{value:function(t){var e=this.config;return this.proportionScale=t("value",e.proportion),this.labelScale=t("value",e.label),this.colorScale=t("color",e.color,{}),this},writable:!0,configurable:!0},drawFrames:{value:function(t){var e=this.config,n=e.options,i=this.proportionScale,r=this.labelScale,a=this.colorScale,o=n.width,u=n.height,s=u/2,l=t[0].take(),c=n.container.append("svg:svg").data([l]).attr("width",o).attr("height",u).append("svg:g").attr("transform","translate("+s+","+s+")"),d=d3.layout.pie().value(function(t){return t[i.dim]}),f=d3.svg.arc().outerRadius(s),h=c.selectAll(".slice").data(d).enter().append("g").attr("class","slice");h.append("path").attr("class",function(t){var e=t.data||{};return a(e[a.dim])}).attr("d",function(t){return f(t)}),h.append("text").attr("transform",function(t){return t.innerRadius=0,t.outerRadius=s,"translate("+f.centroid(t)+")"}).attr("text-anchor","middle").text(function(t){var e=t.data||{};return r(e[r.dim])})},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function u(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:u(r,e,n)}if("value"in i&&i.writable)return i.value;var a=i.get;return void 0===a?void 0:a.call(n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(1).CSS_PREFIX;e.Point=function(){function t(e){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.config=e}return i(t,null,{drawLayout:{value:function(t){var e=this.config;return this.xScale=t("pos",e.x,[0,e.options.width]),this.yScale=t("pos",e.y,[e.options.height,0]),this.color=t("color",e.color,{}),this.size=t("size",e.size,{}),this},writable:!0,configurable:!0},drawFrames:{value:function(t){var e=this.config.options.container,n=this.xScale,i=this.yScale,r=this.color,a=this.size,u=function(){var t={r:0,cx:function(t){return n(t[n.dim])},cy:function(t){return i(t[i.dim])},"class":function(t){return""+o+"dot dot i-role-element i-role-datum "+r(t[r.dim])}};return this.attr(t).transition().duration(500).attr("r",function(t){return a(t[a.dim])})};return t.map(function(t){var n;n=e.selectAll(".dot").data(t.take()),n.exit().remove(),n.enter().append("circle").call(u)}),[]},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},r=n(3).utilsDraw,a=n(1).CSS_PREFIX,o="i-role-bar-group",u=function(t){return"measure"===t.dimType},s=function(t){var e=t.domain().length,n=t.categoryLength,i=t.size/e,r=i/(n+1);return{tickWidth:i,intervalWidth:r,offsetCategory:r}},l={NORM:function(t,e,n,a,o,l,c){var d=1,f=Math.min.apply(Math,i(n.domain())),h=!isNaN(f),g=!h||0>=f?0:f,p=u(t.x),m=p?c:s({domain:e.domain,categoryLength:a.count(),size:o}),y=m.tickWidth,v=m.intervalWidth,x=m.offsetCategory,b=function(n){return e(n[t.x.scaleDim])-y/2},w=h?function(e){var i=e[t.y.scaleDim],r=n(Math.max(g,i)),a=Math.abs(n(i)-n(g)),o=d>a;return o&&i>0?r-d:r}:function(e){return n(e[t.y.scaleDim])},_=function(){return v},k=h?function(e){var i=e[t.y.scaleDim],r=Math.abs(n(i)-n(g));return 0===i?r:Math.max(d,r)}:function(e){return l-n(e[t.y.scaleDim])},L=function(t){return r.translate(a(t)*x+x/2,0)};return{calculateX:b,calculateY:w,calculateWidth:_,calculateHeight:k,calculateTranslate:L}},FLIP:function(t,e,n,a,o,l,c){var d=1,f=Math.min.apply(Math,i(e.domain())),h=!isNaN(f),g=!h||0>=f?0:f,p=u(t.y),m=p?c:s({domain:n.domain,categoryLength:a.count(),size:l}),y=m.tickWidth,v=m.intervalWidth,x=m.offsetCategory,b=h?function(n){var i=n[t.x.scaleDim],r=Math.abs(e(i)-e(g)),a=e(Math.min(g,i)),o=r-d,u=i>0?d+o:0>i?0-d:0,s=0>o;return s?a+u:a}:0,w=function(e){return n(e[t.y.scaleDim])-y/2},_=h?function(n){var i=n[t.x.scaleDim],r=Math.abs(e(i)-e(g));return 0===i?r:Math.max(d,r)}:function(n){return e(n[t.x.scaleDim])},k=function(){return v},L=function(t){return r.translate(0,a(t)*x+x/2)};return{calculateX:b,calculateY:w,calculateWidth:_,calculateHeight:k,calculateTranslate:L}}},c=function(t){var e=t.options,n=e.xScale,i=e.yScale,r=e.color,u=l[t.flip?"FLIP":"NORM"],s=t.groupBy(t.source(),t.color.scaleDim),c=t.groupBy(t.partition(),t.color.scaleDim),d=function(t){var e=0,n=JSON.stringify(t.key);return _.find(s,function(t,i){var r=JSON.stringify(t.key)===n;return r&&(e=i),r}),e};d.count=function(){return s.length};var f=u(t,n,i,d,e.width,e.height,{tickWidth:5,intervalWidth:5,offsetCategory:0}),h=f.calculateX,g=f.calculateY,p=f.calculateWidth,m=f.calculateHeight,y=f.calculateTranslate,v=function(){return this.attr("height",m).attr("width",p).attr("class",function(e){return"i-role-element i-role-datum bar "+a+"bar "+r(e[t.color.scaleDim])
}).attr("x",h).attr("y",g)},x=function(){this.attr("class",o).attr("transform",y);var t=this.selectAll("bar").data(function(t){return t.values});t.call(v),t.enter().append("rect").call(v),t.exit().remove()},b=e.container.selectAll("."+o).data(c);b.call(x),b.enter().append("g").call(x),b.exit().remove()};e.interval=c,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(1).CSS_PREFIX,r=n(11),a=r.getLineClassesByWidth,o=r.getLineClassesByCount,u=function s(t){var e=t.options,n=e.xScale,r=e.yScale,u=e.color,l=t.groupBy(t.partition(),t.color.scaleDim),c=a(e.width),d=o(l.length),f=function(){this.attr("class",function(t){return""+i+"line i-role-element i-role-datum line "+u(t.key)+" "+c+" "+d});var t=this.selectAll("path").data(function(t){return[t.values]});t.call(g),t.enter().append("path").call(g),t.exit().remove()},h=function(a){var o=function(){return this.attr("r",1.5).attr("class",function(e){return""+i+"dot-line dot-line i-role-element "+i+"dot i-role-datum "+u(e[t.color.scaleDim])}).attr("cx",function(e){return n(e[t.x.scaleDim])}).attr("cy",function(e){return r(e[t.y.scaleDim])})},s=e.container.selectAll(".dot-line").data(a);s.call(o),s.exit().remove(),s.enter().append("circle").call(o)},s=d3.svg.line().x(function(e){return n(e[t.x.scaleDim])}).y(function(e){return r(e[t.y.scaleDim])}),g=function(){this.attr("d",s)},p=l.reduce(function(t,e){var n=e.values;return 1===n.length&&t.push(n[0]),t},[]);p.length>0&&h(p);var m=e.container.selectAll(".line").data(l);m.call(f),m.enter().append("g").call(f),m.exit().remove()};e.line=u,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(1).CSS_PREFIX,r=function(t){var e=t.options,n=e.xScale,r=e.yScale,a=e.color,o=e.sizeScale,u=function(){return this.attr("r",function(e){return o(e[t.size.scaleDim])}).attr("cx",function(e){return n(e[t.x.scaleDim])}).attr("cy",function(e){return r(e[t.y.scaleDim])}).attr("class",function(e){return""+i+"dot dot i-role-element i-role-datum "+a(e[t.color.scaleDim])})},s=e.container.selectAll(".dot").data(t.partition());s.call(u),s.exit().remove(),s.enter().append("circle").call(u)};e.point=r,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var i=n(26).coords,r=n(31).line,a=n(32).point,o=n(30).interval,u=(n(3).utilsDraw,n(24).CoordsParallel),s=n(23).CoordsParallelLine,l=function(t,e,n,i,r){var a=Math.min(t,e),o=a*n;return Math.max(r,Math.min(i,o))},c=function(t,e){e.forEach(function(e){t[e]=t.dimension(t[e],t)});var n=t.options,i=n.width,r=n.height;t.x.guide=t.guide.x,t.y.guide=t.guide.y,t.options.xScale=t.x.scaleDim&&t.scaleTo(t.x.scaleDim,[0,i],t.x.guide),t.options.yScale=t.y.scaleDim&&t.scaleTo(t.y.scaleDim,[r,0],t.y.guide);var a=t.guide.color||{};if(t.options.color=t.scaleColor(t.color.scaleDim,a.brewer,a),t.size){var o=1,u=.035,s=.5*_.min([t.guide.x.tickFontHeight,t.guide.y.tickFontHeight].filter(function(t){return 0!==t})),c=.5*_.min([t.guide.x.density,t.guide.y.density].filter(function(t){return 0!==t})),d=t.guide.size||{};t.options.sizeScale=t.scaleSize(t.size.scaleDim,[l(i,r,u,2,o),l(i,r,u,c,o),l(i,r,u,s,o)],d)}return t},d={"COORDS.RECT":{walk:i.walk,draw:function(t,e){return t.x=t.dimension(t.x,t),t.y=t.dimension(t.y,t),i.draw(t,e)}},"ELEMENT.POINT":function(t){return a(c(t,["x","y","color","size"]))},"ELEMENT.LINE":function(t){return r(c(t,["x","y","color"]))},"ELEMENT.INTERVAL":function(t){return o(c(t,["x","y","color"]))},"COORDS.PARALLEL":u,"PARALLEL/ELEMENT.LINE":s};e.nodeMap=d,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(e,n){i(this,t),this.chart=n,this._plugins=e.map(this.initPlugin,this)}return n(t,null,{initPlugin:{value:function(t){var e=this;t.init&&t.init(this.chart),this.chart.on("destroy",t.destroy&&t.destroy.bind(t)||function(){}),Object.keys(t).forEach(function(n){if(0===n.indexOf("on")){var i=n.substr(2);e.chart.on(i.toLowerCase(),t[n].bind(t))}})},writable:!0,configurable:!0}}),t}(),a=["click","mouseover","mouseout","mousemove"],o=function(t){return function(){a.forEach(function(e){this.on(e,function(n){t.fire("element"+e,{elementData:n,element:this,cellData:d3.select(this.parentNode.parentNode).datum()})})},this)}};e.propagateDatumEvents=o,e.Plugins=r,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";{var i=function(t){return t&&t.__esModule?t["default"]:t},r=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(9).UnitDomainPeriodGenerator,u=n(2).utils,s=i(n(7)),l=i(n(4)),c={color:function(t,e){var n,i=t,r=e.brewer,a=s.constant("color-default"),o=s.times(20,function(t){return"color20-"+(1+t)}),u=function(t,e){if(0===t.length||1===t.length&&null===t[0])return a;var n=t.map(function(t){return String(t).toString()});return l.scale.ordinal().range(e).domain(n)},c=function(t,e){var n=s.keys(t),i=s.values(t),r=l.scale.ordinal().range(i).domain(n);return function(n){return t.hasOwnProperty(n)?r(n):e(n)}},d=function(t){return function(e){return t(String(e).toString())}};if(r)if(s.isArray(r))n=d(u(i,r));else if(s.isFunction(r))n=function(t){return r(t,d(u(i,o)))};else{if(!s.isObject(r))throw new Error("This brewer is not supported");n=c(r,a)}else n=d(u(i,o));return n.dim=e.dim,n.domain=function(){return i},n.source=e.source,n.scaleDim=e.dim,n.scaleType="color",n},size:function(t,e){var n=e.min,i=e.max,r=e.mid,a=function(t){return Math.sqrt(t)},o=s.filter(t,s.isFinite);if(0===o.length)return function(){return r};var u=1,l=0,c=Math.min.apply(null,o),d=Math.max.apply(null,o),f=a(Math.max.apply(null,[Math.abs(c),Math.abs(d),d-c]));l=0>c?c:0,u=0===f?1:(i-n)/f;var h=function(t){var e=null!==t?parseFloat(t):0;if(!s.isFinite(e))return i;var r=e-l;return n+a(r)*u};return h.dim=e.dim,h.domain=function(){return t},h.source=e.source,h.scaleDim=e.dim,h.scaleType="size",h},ordinal:function(t,e,n){var i=l.scale.ordinal().domain(t),r=i.rangePoints(n,1);return r.dim=e.dim,r.domain=function(){return t},r.source=e.source,r.scaleDim=e.dim,r.scaleType="ordinal",r},linear:function(t,e,n){var i=e.autoScale?u.autoScale(t):l.extent(t),r=s.isNumber(e.min)?e.min:i[0],a=s.isNumber(e.max)?e.max:i[1],o=[Math.min(r,i[0]),Math.max(a,i[1])],c=l.scale.linear().domain(o),d=c.rangeRound(n,1),f=function(t){var e=t;return e>a&&(e=a),r>e&&(e=r),d(e)};return Object.keys(d).forEach(function(t){return f[t]=d[t]}),f.dim=e.dim,f.domain=function(){return o},f.source=e.source,f.scaleDim=e.dim,f.scaleType="linear",f},period:function(t,e,n){var i=l.extent(t),r=s.isNull(e.min)||s.isUndefined(e.min)?i[0]:new Date(e.min).getTime(),a=s.isNull(e.max)||s.isUndefined(e.max)?i[1]:new Date(e.max).getTime(),u=[new Date(Math.min(r,i[0])),new Date(Math.max(a,i[1]))],c=o.generate(u[0],u[1],e.period),d=l.scale.ordinal().domain(c),f=d.rangePoints(n,1);return f.dim=e.dim,f.domain=function(){return c},f.source=e.source,f.scaleDim=e.dim,f.scaleType="period",f},time:function(t,e,n){var i=l.extent(t),r=s.isNull(e.min)||s.isUndefined(e.min)?i[0]:new Date(e.min).getTime(),a=s.isNull(e.max)||s.isUndefined(e.max)?i[1]:new Date(e.max).getTime(),o=[new Date(Math.min(r,i[0])),new Date(Math.max(a,i[1]))],u=l.time.scale().domain(o),c=u.range(n);return c.dim=e.dim,c.domain=function(){return o},c.source=e.source,c.scaleDim=e.dim,c.scaleType="time",c},value:function(t,e){var n=function(t){return t};return n.dim=e.dim,n.domain=function(){return varSet},n.source=e.source,n.scaleDim=e.dim,n.scaleType="value",n}},d=function(t){return"date"===t?function(t){return new Date(t).getTime()}:function(t){return t}};e.ScalesFactory=function(){function t(e){a(this,t),this.sources=e}return r(t,null,{create:{value:function(t,e,n){var i=t.dim,r=t.source,a=(this.sources[r].dims[i]||{}).type,o=t.fitToFrame?e.take():this.sources[t.source].data,u=s(o).chain().pluck(i).uniq(d(a)).value();return c[t.type](u,t,n)},writable:!0,configurable:!0}}),t}()}Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=function(t){return Math.sqrt(t)},i=function(t,e,i,r){var a=_.filter(t,_.isFinite);if(0===a.length)return function(){return r};var o=1,u=0,s=Math.min.apply(null,a),l=Math.max.apply(null,a),c=n(Math.max.apply(null,[Math.abs(s),Math.abs(l),l-s]));return u=0>s?s:0,o=0===c?1:(i-e)/c,function(t){var r=null!==t?parseFloat(t):0;if(!_.isFinite(r))return i;var a=r-u;return e+n(a)*o}};e.sizeScale=i,Object.defineProperty(e,"__esModule",{value:!0})}]);